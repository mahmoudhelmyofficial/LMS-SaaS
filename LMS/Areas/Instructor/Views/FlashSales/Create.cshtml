@model LMS.Areas.Instructor.ViewModels.FlashSaleCreateViewModel

@{
    ViewData["Title"] = Html.T("إنشاء عرض سريع", "Create Flash Sale");
    ViewData["Subtitle"] = Html.T("إنشاء عرض سريع جديد لزيادة المبيعات", "Create new flash sale to boost sales");
    var indexUrl = Url.Action("Index");
}

@await Html.PartialAsync("_PageHeader", new ViewDataDictionary(ViewData)
{
    { "ActionButtons", Html.Raw($@"
        <a href='{indexUrl}' class='btn btn-light'>
            <i class='feather-arrow-right me-2'></i>
            العودة
        </a>
    ") }
})

<div class="main-content">
    @await Html.PartialAsync("_AlertMessages")

    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card stretch stretch-full">
                <div class="card-header">
                    <h5 class="card-title">@Html.T("إنشاء عرض سريع جديد", "Create new flash sale")</h5>
                </div>
                <div class="card-body">
                    <form asp-action="Create" method="post">
                        @Html.AntiForgeryToken()

                        <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

                        <!-- Course Selection -->
                        <div class="mb-4">
                            <label asp-for="CourseId" class="form-label required">الدورة</label>
                            <select asp-for="CourseId" class="form-select" id="courseSelect" required>
                                <option value="">-- اختر الدورة --</option>
                                @if (ViewBag.Courses != null)
                                {
                                    foreach (var course in ViewBag.Courses as Microsoft.AspNetCore.Mvc.Rendering.SelectList)
                                    {
                                        <option value="@course.Value">@course.Text</option>
                                    }
                                }
                            </select>
                            <div class="form-text">اختر الدورة التي تريد عمل عرض سريع عليها</div>
                            <span asp-validation-for="CourseId" class="text-danger"></span>
                        </div>

                        <!-- Name & Description -->
                        <div class="mb-4">
                            <label asp-for="Name" class="form-label required">اسم العرض</label>
                            <input asp-for="Name" class="form-control" placeholder="مثل: عرض نهاية الأسبوع" required />
                            <span asp-validation-for="Name" class="text-danger"></span>
                        </div>

                        <div class="mb-4">
                            <label asp-for="Description" class="form-label">الوصف</label>
                            <textarea asp-for="Description" class="form-control" rows="3" placeholder="وصف العرض..."></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                        <!-- Pricing -->
                        <div class="mb-4">
                            <label asp-for="DiscountPrice" class="form-label required">سعر العرض</label>
                            <div class="input-group">
                                <input asp-for="DiscountPrice" type="number" class="form-control" min="0" step="0.01" placeholder="0.00" required />
                                <span class="input-group-text">ج.م</span>
                            </div>
                            <div class="form-text">يجب أن يكون أقل من السعر الأصلي للدورة</div>
                            <span asp-validation-for="DiscountPrice" class="text-danger"></span>
                        </div>

                        <!-- Duration -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label asp-for="StartDate" class="form-label required">تاريخ البدء</label>
                                <input asp-for="StartDate" type="datetime-local" class="form-control" required />
                                <span asp-validation-for="StartDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="EndDate" class="form-label required">تاريخ الانتهاء</label>
                                <input asp-for="EndDate" type="datetime-local" class="form-control" required />
                                <span asp-validation-for="EndDate" class="text-danger"></span>
                            </div>
                        </div>

                        <!-- Max Quantity & Priority -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label asp-for="MaxQuantity" class="form-label">الحد الأقصى للمبيعات</label>
                                <input asp-for="MaxQuantity" type="number" class="form-control" min="1" placeholder="اتركه فارغاً لعدم وجود حد" />
                                <div class="form-text">عدد المبيعات المسموح بها</div>
                                <span asp-validation-for="MaxQuantity" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="Priority" class="form-label">الأولوية</label>
                                <input asp-for="Priority" type="number" class="form-control" min="0" value="0" />
                                <div class="form-text">رقم أقل = أولوية أعلى</div>
                                <span asp-validation-for="Priority" class="text-danger"></span>
                            </div>
                        </div>

                        <!-- Settings -->
                        <div class="card border mb-4">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">@Html.T("الإعدادات", "Settings")</h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-check form-switch">
                                            <input asp-for="IsActive" class="form-check-input" type="checkbox" checked />
                                            <label asp-for="IsActive" class="form-check-label">
                                                <strong>تفعيل العرض</strong>
                                                <span class="d-block text-muted fs-11">تفعيل العرض فوراً</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check form-switch">
                                            <input asp-for="ShowTimer" class="form-check-input" type="checkbox" checked />
                                            <label asp-for="ShowTimer" class="form-check-label">
                                                <strong>عرض المؤقت</strong>
                                                <span class="d-block text-muted fs-11">عرض عد تنازلي للعرض</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2 justify-content-end">
                            <a href="@Url.Action("Index")" class="btn btn-light">
                                <i class="feather-x me-2"></i>
                                إلغاء
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="feather-check me-2"></i>
                                إنشاء العرض
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tips Card -->
            <div class="card border-info">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">
                        <i class="feather-info text-info me-2"></i>
                        نصائح للعروض السريعة الناجحة
                    </h6>
                    <ul class="mb-0">
                        <li class="mb-2">حدد خصماً جذاباً (30-50%) لزيادة المبيعات</li>
                        <li class="mb-2">اجعل المدة محدودة (24-72 ساعة) لخلق شعور بالإلحاح</li>
                        <li class="mb-2">قم بالترويج للعرض عبر البريد الإلكتروني ووسائل التواصل</li>
                        <li>استخدم المؤقت لزيادة الضغط النفسي على العميل</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

