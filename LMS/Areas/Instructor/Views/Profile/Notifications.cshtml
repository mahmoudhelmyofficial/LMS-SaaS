@model LMS.Areas.Instructor.ViewModels.InstructorNotificationPreferencesViewModel

@{
    ViewData["Title"] = Html.T("تفضيلات الإشعارات", "Notification Preferences");
    ViewData["Subtitle"] = Html.T("اختر كيف ومتى تريد تلقي الإشعارات", "Choose how and when to receive notifications");
}

@{
    var indexUrl = Url.Action("Index");
    var actionButtonsHtml = "<a href='" + indexUrl + "' class='btn btn-light'>" +
        "<i class='feather-arrow-right me-2'></i>" +
        Html.T("العودة للملف الشخصي", "Back to profile") +
        "</a>";
}
@await Html.PartialAsync("_PageHeader", new ViewDataDictionary(ViewData)
{
    { "ActionButtons", Html.Raw(actionButtonsHtml) }
})

<div class="main-content">
    @await Html.PartialAsync("_AlertMessages")

    <form asp-action="Notifications" method="post" id="notificationsForm">
        @Html.AntiForgeryToken()
        
        <div class="row">
            <div class="col-lg-8">
                <!-- Email Notifications -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-mail me-2 text-primary"></i>
                            @Html.T("إشعارات البريد الإلكتروني", "Email notifications")
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnNewEnrollment" class="form-check-input" type="checkbox" id="emailOnNewEnrollment" />
                                <label class="form-check-label" for="emailOnNewEnrollment">
                                    <strong>@Html.T("إشعار عند تسجيل طالب جديد", "Notify on new student enrollment")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند تسجيل طالب جديد في إحدى دوراتك", "You will receive an email when a new student enrolls in one of your courses")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnNewReview" class="form-check-input" type="checkbox" id="emailOnNewReview" />
                                <label class="form-check-label" for="emailOnNewReview">
                                    <strong>@Html.T("إشعار عند تقييم جديد", "Notify on new review")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند إضافة تقييم جديد لدورتك", "You will receive an email when a new review is added to your course")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnNewQuestion" class="form-check-input" type="checkbox" id="emailOnNewQuestion" />
                                <label class="form-check-label" for="emailOnNewQuestion">
                                    <strong>@Html.T("إشعار عند سؤال جديد", "Notify on new question")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند طرح سؤال جديد في إحدى دوراتك", "You will receive an email when a new question is posted in one of your courses")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnNewMessage" class="form-check-input" type="checkbox" id="emailOnNewMessage" />
                                <label class="form-check-label" for="emailOnNewMessage">
                                    <strong>@Html.T("إشعار عند رسالة جديدة", "Notify on new message")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند استلام رسالة جديدة من طالب", "You will receive an email when you receive a new message from a student")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnPaymentReceived" class="form-check-input" type="checkbox" id="emailOnPaymentReceived" />
                                <label class="form-check-label" for="emailOnPaymentReceived">
                                    <strong>@Html.T("إشعار عند استلام دفعة", "Notify on payment received")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند استلام دفعة جديدة", "You will receive an email when a new payment is received")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailOnWithdrawalProcessed" class="form-check-input" type="checkbox" id="emailOnWithdrawalProcessed" />
                                <label class="form-check-label" for="emailOnWithdrawalProcessed">
                                    <strong>@Html.T("إشعار عند معالجة السحب", "Notify on withdrawal processed")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى بريد إلكتروني عند معالجة طلب سحب", "You will receive an email when a withdrawal request is processed")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailWeeklyDigest" class="form-check-input" type="checkbox" id="emailWeeklyDigest" />
                                <label class="form-check-label" for="emailWeeklyDigest">
                                    <strong>@Html.T("ملخص أسبوعي", "Weekly digest")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى ملخصاً أسبوعياً عن نشاط دوراتك", "You will receive a weekly summary of your course activity")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input asp-for="EmailMonthlyReport" class="form-check-input" type="checkbox" id="emailMonthlyReport" />
                                <label class="form-check-label" for="emailMonthlyReport">
                                    <strong>@Html.T("تقرير شهري", "Monthly report")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى تقريراً شهرياً عن أداء دوراتك وإيراداتك", "You will receive a monthly report on your course performance and revenue")</p>
                                </label>
                            </div>

                            <div class="form-check form-switch">
                                <input asp-for="EmailMarketingUpdates" class="form-check-input" type="checkbox" id="emailMarketingUpdates" />
                                <label class="form-check-label" for="emailMarketingUpdates">
                                    <strong>@Html.T("تحديثات تسويقية", "Marketing updates")</strong>
                                    <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى تحديثات عن العروض والفرص التسويقية", "You will receive updates on offers and marketing opportunities")</p>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Push & In-App Notifications -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-bell me-2 text-primary"></i>
                            الإشعارات الفورية
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="form-check form-switch mb-3">
                            <input asp-for="PushNotifications" class="form-check-input" type="checkbox" id="pushNotifications" />
                            <label class="form-check-label" for="pushNotifications">
                                <strong>@Html.T("الإشعارات الفورية (Push Notifications)", "Push notifications")</strong>
                                <p class="fs-13 text-muted mb-0">@Html.T("ستتلقى إشعارات فورية على جهازك", "You will receive instant notifications on your device")</p>
                            </label>
                        </div>

                        <div class="form-check form-switch">
                            <input asp-for="InAppNotifications" class="form-check-input" type="checkbox" id="inAppNotifications" />
                            <label class="form-check-label" for="inAppNotifications">
                                <strong>@Html.T("إشعارات داخل التطبيق", "In-app notifications")</strong>
                                <p class="fs-13 text-muted mb-0">@Html.T("ستظهر الإشعارات في لوحة التحكم", "Notifications will appear in the dashboard")</p>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card stretch stretch-full mb-4 bg-soft-info border-0">
                    <div class="card-body">
                        <div class="text-center mb-3">
                            <i class="feather-bell text-info" style="font-size: 48px;"></i>
                        </div>
                        <h6 class="text-center mb-3">@Html.T("إدارة الإشعارات", "Notification management")</h6>
                        <p class="fs-13 text-center mb-0">
                            اختر الإشعارات التي تريد تلقيها للحفاظ على تحديثاتك دون إزعاج.
                        </p>
                    </div>
                </div>

                <div class="card stretch stretch-full">
                    <div class="card-header">
                        <h5 class="card-title">@Html.T("نصائح", "Tips")</h5>
                    </div>
                    <div class="card-body">
                        <ul class="fs-13 mb-0">
                            <li class="mb-2">@Html.T("فعّل الإشعارات المهمة فقط", "Enable only important notifications")</li>
                            <li class="mb-2">استخدم الملخصات الأسبوعية لتقليل البريد</li>
                            <li class="mb-2">راقب إشعارات المدفوعات بعناية</li>
                            <li class="mb-0">يمكنك تغيير الإعدادات في أي وقت</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="card stretch stretch-full">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between gap-3">
                            <a href="@Url.Action("Index")" class="btn btn-light">
                                <i class="feather-x me-2"></i>
                                @Html.T("إلغاء", "Cancel")
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="feather-save me-2"></i>
                                @Html.T("حفظ التفضيلات", "Save preferences")
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        // Select all / Deselect all functionality
        document.getElementById('notificationsForm').addEventListener('submit', function(e) {
            // Validation can be added here if needed
            return true;
        });
    </script>
}
