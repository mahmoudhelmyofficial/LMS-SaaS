@*
    Shared Category Modals for Instructor Dashboard
    Used in: Courses, Books, and other forms requiring category selection
    Provides on-the-fly category and subcategory creation
*@

<!-- Add Category Modal -->
<div class="modal fade" id="addCategoryModal" tabindex="-1" data-bs-backdrop="false" aria-labelledby="addCategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title" id="addCategoryModalLabel">
                    <i class="feather-folder-plus me-2 text-primary"></i>
                    @Html.T("إضافة تصنيف جديد", "Add new category")
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="@Html.T("إغلاق", "Close")"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        @Html.T("اسم التصنيف", "Category name") <span class="text-danger">*</span>
                    </label>
                    <input type="text" 
                           class="form-control" 
                           id="newCategoryName" 
                           placeholder="@Html.T("مثال: البرمجة والتطوير", "e.g. Programming & Development")" 
                           maxlength="100"
                           autocomplete="off">
                    <div class="invalid-feedback" id="categoryNameError"></div>
                </div>
                <div class="mb-3">
                    <label class="form-label fw-bold">@Html.T("وصف التصنيف", "Category description")</label>
                    <textarea class="form-control" 
                              id="newCategoryDescription" 
                              rows="2" 
                              placeholder="@Html.T("وصف مختصر للتصنيف (اختياري)...", "Brief category description (optional)...")" 
                              maxlength="500"></textarea>
                </div>
                <div class="mb-0">
                    <label class="form-label fw-bold">@Html.T("أيقونة التصنيف", "Category icon")</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light">
                            <i class="feather-book" id="categoryIconPreview"></i>
                        </span>
                        <input type="text" 
                               class="form-control" 
                               id="newCategoryIcon" 
                               placeholder="@Html.T("كتاب", "book")" 
                               value="book"
                               autocomplete="off">
                    </div>
                    <small class="text-muted">
                        @Html.T("اختر أيقونة من", "Choose an icon from") 
                        <a href="https://feathericons.com/" target="_blank" rel="noopener noreferrer">@Html.T("Feather Icons", "Feather Icons")</a>
                    </small>
                </div>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                    <i class="feather-x me-1"></i>
                    @Html.T("إلغاء", "Cancel")
                </button>
                <button type="button" class="btn btn-primary" id="btnSaveCategory" onclick="InstructorCategoryManager.saveCategory()">
                    <span class="btn-text">
                        <i class="feather-plus me-1"></i>
                        @Html.T("إضافة التصنيف", "Add category")
                    </span>
                    <span class="btn-loading d-none">
                        <span class="spinner-border spinner-border-sm me-1"></span>
                        @Html.T("جاري الحفظ...", "Saving...")
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Add Subcategory Modal -->
<div class="modal fade" id="addSubcategoryModal" tabindex="-1" data-bs-backdrop="false" aria-labelledby="addSubcategoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title" id="addSubcategoryModalLabel">
                    <i class="feather-folder-plus me-2 text-secondary"></i>
                    @Html.T("إضافة تصنيف فرعي", "Add subcategory")
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="@Html.T("إغلاق", "Close")"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label fw-bold">@Html.T("التصنيف الرئيسي", "Parent category")</label>
                    <input type="text" 
                           class="form-control bg-light" 
                           id="parentCategoryName" 
                           readonly>
                    <input type="hidden" id="parentCategoryId">
                </div>
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        @Html.T("اسم التصنيف الفرعي", "Subcategory name") <span class="text-danger">*</span>
                    </label>
                    <input type="text" 
                           class="form-control" 
                           id="newSubcategoryName" 
                           placeholder="@Html.T("مثال: تطوير الويب", "e.g. Web Development")" 
                           maxlength="100"
                           autocomplete="off">
                    <div class="invalid-feedback" id="subcategoryNameError"></div>
                </div>
                <div class="mb-0">
                    <label class="form-label fw-bold">@Html.T("وصف التصنيف الفرعي", "Subcategory description")</label>
                    <textarea class="form-control" 
                              id="newSubcategoryDescription" 
                              rows="2" 
                              placeholder="@Html.T("وصف مختصر (اختياري)...", "Brief description (optional)...")" 
                              maxlength="500"></textarea>
                </div>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                    <i class="feather-x me-1"></i>
                    @Html.T("إلغاء", "Cancel")
                </button>
                <button type="button" class="btn btn-primary" id="btnSaveSubcategory" onclick="InstructorCategoryManager.saveSubcategory()">
                    <span class="btn-text">
                        <i class="feather-plus me-1"></i>
                        @Html.T("إضافة التصنيف الفرعي", "Add subcategory")
                    </span>
                    <span class="btn-loading d-none">
                        <span class="spinner-border spinner-border-sm me-1"></span>
                        @Html.T("جاري الحفظ...", "Saving...")
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    #addCategoryModal .modal-content,
    #addSubcategoryModal .modal-content {
        border: none;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }
    
    #addCategoryModal .modal-header,
    #addSubcategoryModal .modal-header {
        padding: 1.25rem 1.5rem 0.5rem;
    }
    
    #addCategoryModal .modal-body,
    #addSubcategoryModal .modal-body {
        padding: 1rem 1.5rem;
    }
    
    #addCategoryModal .modal-footer,
    #addSubcategoryModal .modal-footer {
        padding: 0.75rem 1.5rem 1.25rem;
    }
    
    #addCategoryModal .modal-title,
    #addSubcategoryModal .modal-title {
        font-weight: 600;
        font-size: 1.1rem;
    }
    
    .btn-loading {
        pointer-events: none;
    }
</style>

