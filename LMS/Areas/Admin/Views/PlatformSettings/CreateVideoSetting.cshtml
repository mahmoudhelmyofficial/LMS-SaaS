@model LMS.Areas.Admin.ViewModels.VideoSettingViewModel

@{
    ViewData["Title"] = Html.T("إنشاء إعدادات الفيديو", "Create Video Settings");
    var breadcrumbs = new List<(string Name, string? Url)>
    {
        (Html.T("لوحة التحكم", "Dashboard"), Url.Action("Index", "Dashboard")),
        (Html.T("إعدادات المنصة", "Platform Settings"), Url.Action("Index", "PlatformSettings")),
        (Html.T("إعدادات الفيديو", "Video Settings"), Url.Action("Index", "VideoSettings")),
        (Html.T("إنشاء جديد", "Create new"), null)
    };
    ViewData["Breadcrumbs"] = breadcrumbs;
}

@section Styles {
    <style>
        .provider-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e9ecef;
        }
        .provider-card:hover {
            border-color: var(--bs-primary);
            transform: translateY(-2px);
        }
        .provider-card.active {
            border-color: var(--bs-primary);
            background-color: #f0f7ff;
        }
    </style>
}

@await Html.PartialAsync("_PageHeader")

<div class="main-content">
    <form asp-action="SaveVideoSetting" method="post">
        @Html.AntiForgeryToken()
        <div class="row">
            <div class="col-lg-12">
                <!-- Welcome -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-body text-center py-5">
                        <div class="avatar-text avatar-xl bg-soft-primary text-primary mx-auto mb-3">
                            <i class="feather-video" style="font-size: 3rem;"></i>
                        </div>
                        <h3 class="fw-bold mb-2">إعداد خدمة استضافة الفيديو</h3>
                        <p class="text-muted mb-0">اختر مزود استضافة الفيديو وقم بتكوين الإعدادات الأساسية</p>
                    </div>
                </div>

                <!-- Provider Selection -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-globe me-2"></i>اختر مزود الاستضافة
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-md-3">
                                <div class="provider-card card text-center p-4 h-100" onclick="selectProvider('YouTube')">
                                    <div class="card-body">
                                        <i class="feather-youtube" style="font-size: 3rem; color: #FF0000;"></i>
                                        <h5 class="fw-bold mt-3 mb-2">YouTube</h5>
                                        <p class="text-muted small">استضافة مجانية وسهلة</p>
                                        <span class="badge bg-soft-success text-success">مجاني</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="provider-card card text-center p-4 h-100" onclick="selectProvider('Vimeo')">
                                    <div class="card-body">
                                        <i class="feather-video" style="font-size: 3rem; color: #1AB7EA;"></i>
                                        <h5 class="fw-bold mt-3 mb-2">Vimeo</h5>
                                        <p class="text-muted small">جودة احترافية عالية</p>
                                        <span class="badge bg-soft-primary text-primary">احترافي</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="provider-card card text-center p-4 h-100" onclick="selectProvider('BunnyStream')">
                                    <div class="card-body">
                                        <i class="feather-zap" style="font-size: 3rem; color: #FF6B35;"></i>
                                        <h5 class="fw-bold mt-3 mb-2">Bunny Stream</h5>
                                        <p class="text-muted small">سريع وآمن ومتطور</p>
                                        <span class="badge bg-soft-success text-success">موصى به</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="provider-card card text-center p-4 h-100" onclick="selectProvider('Cloudflare')">
                                    <div class="card-body">
                                        <i class="feather-cloud" style="font-size: 3rem; color: #F38020;"></i>
                                        <h5 class="fw-bold mt-3 mb-2">Cloudflare</h5>
                                        <p class="text-muted small">أمان وسرعة عالمية</p>
                                        <span class="badge bg-soft-info text-info">آمن</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <input type="hidden" asp-for="DefaultProvider" id="providerInput" value="@Model.DefaultProvider" />
                    </div>
                </div>

                <!-- Basic Settings -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-settings me-2"></i>الإعدادات الأساسية
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label asp-for="DefaultQuality" class="form-label">الجودة الافتراضية</label>
                                <select asp-for="DefaultQuality" class="form-select">
                                    <option value="auto">تلقائي (Auto)</option>
                                    <option value="1080p">Full HD (1080p)</option>
                                    <option value="720p" selected>HD (720p)</option>
                                    <option value="480p">SD (480p)</option>
                                    <option value="360p">Low (360p)</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-4">
                                <label asp-for="MaxFileSizeMB" class="form-label">الحد الأقصى لحجم الملف (MB)</label>
                                <input asp-for="MaxFileSizeMB" type="number" class="form-control" value="500" min="1" max="10000" />
                                <small class="text-muted">الحد الأقصى المسموح لرفع ملف واحد</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableAutoQuality" class="form-check-input" type="checkbox" checked />
                                    <label class="form-check-label">
                                        <strong>جودة تلقائية</strong>
                                        <br><small class="text-muted">تتكيف حسب سرعة الإنترنت</small>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableTranscoding" class="form-check-input" type="checkbox" checked />
                                    <label class="form-check-label">
                                        <strong>تحويل تلقائي</strong>
                                        <br><small class="text-muted">تحويل لصيغ متعددة</small>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableThumbnailGeneration" class="form-check-input" type="checkbox" checked />
                                    <label class="form-check-label">
                                        <strong>توليد صور مصغرة</strong>
                                        <br><small class="text-muted">معاينات للفيديوهات</small>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <i class="feather-info me-2"></i>
                            <strong>ملاحظة:</strong> يمكنك تعديل هذه الإعدادات لاحقاً من صفحة إعدادات الفيديو.
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex gap-2 justify-content-between">
                    <a asp-action="Index" class="btn btn-light">
                        <i class="feather-x me-2"></i>إلغاء
                    </a>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="feather-save me-2"></i>حفظ وابدأ
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        function selectProvider(provider) {
            $('.provider-card').removeClass('active');
            event.currentTarget.classList.add('active');
            $('#providerInput').val(provider);
        }
    </script>
}

