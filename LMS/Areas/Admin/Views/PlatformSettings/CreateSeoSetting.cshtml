@model LMS.Areas.Admin.ViewModels.SeoSettingViewModel

@{
    ViewData["Title"] = Html.T("Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª SEO", "Create SEO settings");
    var breadcrumbs = new List<(string Name, string? Url)>
    {
        (Html.T("Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…", "Dashboard"), Url.Action("Index", "Dashboard")),
        (Html.T("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†ØµØ©", "Platform settings"), Url.Action("Index", "PlatformSettings")),
        (Html.T("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª SEO", "SEO settings"), Url.Action("Index", "SeoSettings")),
        (Html.T("Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯", "Create new"), null)
    };
    ViewData["Breadcrumbs"] = breadcrumbs;
}

@section Styles {
    <style>
        .setup-step {
            padding: 1.5rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        .setup-step.active {
            border-color: var(--bs-primary);
            background-color: #f0f7ff;
        }
        .setup-step.completed {
            border-color: #10b981;
            background-color: #f0fdf4;
        }
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .setup-step.active .step-number {
            background: var(--bs-primary);
            color: white;
        }
        .setup-step.completed .step-number {
            background: #10b981;
            color: white;
        }
    </style>
}

@await Html.PartialAsync("_PageHeader")

<div class="main-content">
    <form asp-action="SaveSeoSetting" method="post">
        @Html.AntiForgeryToken()
        <div class="row">
            <div class="col-lg-12">
                <!-- Welcome Section -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-body text-center py-5">
                        <div class="avatar-text avatar-xl bg-soft-primary text-primary mx-auto mb-3">
                            <i class="feather-search" style="font-size: 3rem;"></i>
                        </div>
                        <h3 class="fw-bold mb-2">@Html.T("Ø¥Ø¹Ø¯Ø§Ø¯ SEO Ù„Ù„Ù…Ù†ØµØ©", "Platform SEO Setup")</h3>
                        <p class="text-muted mb-4">@Html.T("Ù‚Ù… Ø¨ØªÙƒÙˆÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« Ù„ØªØ­Ø³ÙŠÙ† Ø¸Ù‡ÙˆØ± Ù…Ù†ØµØªÙƒ ÙÙŠ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«", "Configure search engine settings to improve your platform visibility in search results")</p>
                        
                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <div class="alert alert-info text-start">
                                    <strong><i class="feather-info me-2"></i>@Html.T("Ø£Ù‡Ù…ÙŠØ© SEO:", "Why SEO matters:")</strong>
                                    <ul class="mb-0 mt-2">
                                        <li>@Html.T("Ø²ÙŠØ§Ø¯Ø© Ø¸Ù‡ÙˆØ± Ù…Ù†ØµØªÙƒ ÙÙŠ Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«", "Increase your platform visibility in search engines")</li>
                                        <li>@Html.T("Ø¬Ø°Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ†", "Attract more students and instructors")</li>
                                        <li>@Html.T("ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰", "Improve user experience and content sharing")</li>
                                        <li>@Html.T("ØªØªØ¨Ø¹ ÙˆØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹", "Track and analyze site performance")</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Basic Information -->
                <div class="setup-step active">
                    <div class="d-flex align-items-center mb-3">
                        <div class="step-number me-3">1</div>
                        <div>
                            <h5 class="mb-1">@Html.T("Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", "Basic Information")</h5>
                            <p class="text-muted small mb-0">@Html.T("Ø¹Ù†ÙˆØ§Ù† ÙˆÙˆØµÙ Ù…Ù†ØµØªÙƒ", "Your platform title and description")</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label asp-for="SiteTitle" class="form-label">@Html.T("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹", "Site Title") <span class="text-danger">*</span></label>
                            <input asp-for="SiteTitle" class="form-control form-control-lg" placeholder="@Html.T("Ù…Ù†ØµØ© LMS - Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", "LMS Platform - E-Learning")" maxlength="60" />
                            <small class="text-muted">@Html.T("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù…Ø«Ù„: 50-60 Ø­Ø±Ù", "Optimal: 50-60 characters")</small>
                        </div>
                        <div class="col-md-12 mb-3">
                            <label asp-for="SiteDescription" class="form-label">@Html.T("ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹", "Site Description") <span class="text-danger">*</span></label>
                            <textarea asp-for="SiteDescription" class="form-control" rows="3" placeholder="@Html.T("Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© ØªÙ‚Ø¯Ù… Ø¯ÙˆØ±Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©...", "Integrated learning platform offering professional courses...")" maxlength="160"></textarea>
                            <small class="text-muted">@Html.T("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù…Ø«Ù„: 150-160 Ø­Ø±Ù", "Optimal: 150-160 characters")</small>
                        </div>
                        <div class="col-md-12">
                            <label asp-for="SiteKeywords" class="form-label">@Html.T("Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©", "Keywords")</label>
                            <input asp-for="SiteKeywords" class="form-control" placeholder="@Html.T("ØªØ¹Ù„ÙŠÙ…ØŒ Ø¯ÙˆØ±Ø§ØªØŒ Ø¨Ø±Ù…Ø¬Ø©ØŒ ØªØµÙ…ÙŠÙ…", "education, courses, programming, design")" />
                            <small class="text-muted">@Html.T("Ø§ÙØµÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨ÙØ§ØµÙ„Ø©", "Separate keywords with commas")</small>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Analytics -->
                <div class="setup-step">
                    <div class="d-flex align-items-center mb-3">
                        <div class="step-number me-3">2</div>
                        <div>
                            <h5 class="mb-1">@Html.T("Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„", "Analytics Tools")</h5>
                            <p class="text-muted small mb-0">@Html.T("Google Analytics ÙˆØ£Ø¯ÙˆØ§Øª Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø®Ø±Ù‰", "Google Analytics and other tracking tools")</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="GoogleAnalyticsId" class="form-label">@Html.T("Ù…Ø¹Ø±Ù Google Analytics", "Google Analytics ID")</label>
                            <input asp-for="GoogleAnalyticsId" class="form-control" placeholder="G-XXXXXXXXXX" />
                            <small class="text-muted">@Html.T("Ù…Ø«Ø§Ù„: G-1A2B3C4D5E", "e.g. G-1A2B3C4D5E")</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="GoogleTagManagerId" class="form-label">@Html.T("Ù…Ø¹Ø±Ù Google Tag Manager", "Google Tag Manager ID")</label>
                            <input asp-for="GoogleTagManagerId" class="form-control" placeholder="GTM-XXXXXX" />
                            <small class="text-muted">@Html.T("Ù…Ø«Ø§Ù„: GTM-ABC123", "e.g. GTM-ABC123")</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="FacebookPixelId" class="form-label">@Html.T("Ù…Ø¹Ø±Ù Facebook Pixel", "Facebook Pixel ID")</label>
                            <input asp-for="FacebookPixelId" class="form-control" placeholder="123456789012345" />
                            <small class="text-muted">@Html.T("Ø±Ù‚Ù… Ù…ÙƒÙˆÙ† Ù…Ù† 15 Ø®Ø§Ù†Ø©", "15-digit number")</small>
                        </div>
                    </div>
                    <div class="alert alert-light">
                        <small><i class="feather-info me-1"></i><strong>@Html.T("Ù†ØµÙŠØ­Ø©:", "Tip:")</strong> @Html.T("ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ù† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒÙ„ Ø®Ø¯Ù…Ø©.", "You can add these IDs later from each service's dashboard.")</small>
                    </div>
                </div>

                <!-- Step 3: Social Media -->
                <div class="setup-step">
                    <div class="d-flex align-items-center mb-3">
                        <div class="step-number me-3">3</div>
                        <div>
                            <h5 class="mb-1">@Html.T("ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ", "Social Media")</h5>
                            <p class="text-muted small mb-0">@Html.T("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©", "Social network sharing settings")</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label asp-for="OgImage" class="form-label">@Html.T("ØµÙˆØ±Ø© Open Graph", "Open Graph Image")</label>
                            <input asp-for="OgImage" type="url" class="form-control" placeholder="https://example.com/image.jpg" />
                            <small class="text-muted">@Html.T("Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡: 1200x630 Ø¨ÙƒØ³Ù„", "Recommended size: 1200x630 pixels")</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="TwitterCardType" class="form-label">@Html.T("Ù†ÙˆØ¹ Ø¨Ø·Ø§Ù‚Ø© Twitter", "Twitter Card Type")</label>
                            <select asp-for="TwitterCardType" class="form-select">
                                <option value="summary_large_image">@Html.T("Ù…Ù„Ø®Øµ Ø¨ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ±Ø©", "Summary with large image")</option>
                                <option value="summary">@Html.T("Ù…Ù„Ø®Øµ", "Summary")</option>
                                <option value="app">@Html.T("ØªØ·Ø¨ÙŠÙ‚", "App")</option>
                                <option value="player">@Html.T("Ù…Ø´ØºÙ„", "Player")</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="TwitterSite" class="form-label">@Html.T("Ø­Ø³Ø§Ø¨ Twitter", "Twitter Account")</label>
                            <input asp-for="TwitterSite" class="form-control" placeholder="@@YourPlatform" />
                        </div>
                    </div>
                </div>

                <!-- Step 4: Advanced Settings -->
                <div class="setup-step">
                    <div class="d-flex align-items-center mb-3">
                        <div class="step-number me-3">4</div>
                        <div>
                            <h5 class="mb-1">@Html.T("Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©", "Advanced Settings")</h5>
                            <p class="text-muted small mb-0">@Html.T("Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† SEO", "Additional options to improve SEO")</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label asp-for="CanonicalBaseUrl" class="form-label">@Html.T("Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Canonical URL)", "Canonical Base URL")</label>
                            <input asp-for="CanonicalBaseUrl" type="url" class="form-control" placeholder="https://www.yourplatform.com" />
                            <small class="text-muted">@Html.T("Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù…Ù†ØµØªÙƒ", "Your platform main URL")</small>
                        </div>
                        <div class="col-md-12 mb-3">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input asp-for="EnableSitemap" class="form-check-input" type="checkbox" checked />
                                        <label class="form-check-label">
                                            <strong>@Html.T("ØªÙØ¹ÙŠÙ„ Sitemap", "Enable Sitemap")</strong>
                                            <br><small class="text-muted">@Html.T("Ø®Ø±ÙŠØ·Ø© Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«", "Automatic sitemap for search engines")</small>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input asp-for="EnableRobotsTxt" class="form-check-input" type="checkbox" checked />
                                        <label class="form-check-label">
                                            <strong>@Html.T("ØªÙØ¹ÙŠÙ„ robots.txt", "Enable robots.txt")</strong>
                                            <br><small class="text-muted">@Html.T("Ù…Ù„Ù ØªÙˆØ¬ÙŠÙ‡ Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«", "Search engine directives file")</small>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Start Tips -->
                <div class="card stretch stretch-full mb-4">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-zap me-2"></i>@Html.T("Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©", "Quick Start Tips")
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="fw-bold mb-2">@Html.T("âœ“ ØªØ£ÙƒØ¯ Ù…Ù†:", "âœ“ Make sure to:")</h6>
                                <ul class="small">
                                    <li>@Html.T("ÙƒØªØ§Ø¨Ø© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø°Ø§Ø¨ ÙˆÙˆØµÙ Ù…Ø®ØªØµØ±", "Write an attractive title and brief description")</li>
                                    <li>@Html.T("Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©", "Add relevant keywords")</li>
                                    <li>@Html.T("ØªÙØ¹ÙŠÙ„ Google Analytics Ù„Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª", "Enable Google Analytics for insights")</li>
                                    <li>@Html.T("Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©", "Add a suitable image for social sharing")</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6 class="fw-bold mb-2">@Html.T("ğŸ“š Ø®Ø·ÙˆØ§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯:", "ğŸ“š Steps after setup:")</h6>
                                <ul class="small">
                                    <li>@Html.T("Ø³Ø¬Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ ÙÙŠ Google Search Console", "Register your site in Google Search Console")</li>
                                    <li>@Html.T("Ø£Ø±Ø³Ù„ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Sitemap)", "Submit your sitemap")</li>
                                    <li>@Html.T("Ø±Ø§Ù‚Ø¨ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù†ØªØ¸Ø§Ù…", "Monitor site performance regularly")</li>
                                    <li>@Html.T("Ø­Ø¯Ù‘Ø« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±", "Update content regularly")</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex gap-2 justify-content-between">
                    <a asp-action="Index" class="btn btn-light">
                        <i class="feather-x me-2"></i>@Html.T("Ø¥Ù„ØºØ§Ø¡", "Cancel")
                    </a>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="feather-check-circle me-2"></i>@Html.T("Ø­ÙØ¸ ÙˆØ§Ø¨Ø¯Ø£", "Save and Start")
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Mark steps as completed when filled
            function checkStepCompletion() {
                // Step 1
                if ($('input[name="SiteTitle"]').val() && $('textarea[name="SiteDescription"]').val()) {
                    $('.setup-step').eq(0).addClass('completed');
                    $('.setup-step').eq(1).addClass('active');
                }

                // Step 2
                if ($('input[name="GoogleAnalyticsId"]').val()) {
                    $('.setup-step').eq(1).addClass('completed');
                    $('.setup-step').eq(2).addClass('active');
                }

                // Step 3
                if ($('input[name="OgImage"]').val() || $('input[name="TwitterSite"]').val()) {
                    $('.setup-step').eq(2).addClass('completed');
                    $('.setup-step').eq(3).addClass('active');
                }
            }

            // Monitor inputs
            $('input, textarea, select').on('input change', function() {
                checkStepCompletion();
            });

            // Form validation
            $('form').on('submit', function(e) {
                if (!$('input[name="SiteTitle"]').val()) {
                    e.preventDefault();
                    alert('@Html.Raw(Html.T("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹", "Please enter the site title").Replace("'", "\\'"))');
                    $('input[name="SiteTitle"]').focus();
                    return false;
                }
                
                if (!$('textarea[name="SiteDescription"]').val()) {
                    e.preventDefault();
                    alert('@Html.Raw(Html.T("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹", "Please enter the site description").Replace("'", "\\'"))');
                    $('textarea[name="SiteDescription"]').focus();
                    return false;
                }
            });
        });
    </script>
}

