@model LMS.Areas.Admin.ViewModels.VideoSettingViewModel

@{
    ViewData["Title"] = Html.T("تعديل إعدادات الفيديو", "Edit video settings");
    var breadcrumbs = new List<(string Name, string? Url)>
    {
        (Html.T("لوحة التحكم", "Dashboard"), Url.Action("Index", "Dashboard")),
        (Html.T("إعدادات المنصة", "Platform settings"), Url.Action("Index", "PlatformSettings")),
        (Html.T("إعدادات الفيديو", "Video settings"), Url.Action("Index", "VideoSettings")),
        (Html.T("تعديل", "Edit"), null)
    };
    ViewData["Breadcrumbs"] = breadcrumbs;
}

@await Html.PartialAsync("_PageHeader")

<div class="main-content">
    <form asp-action="EditVideoSetting" method="post">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="Id" />
        
        <div class="row">
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">@Html.T("إعدادات المزود", "Provider settings")</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label asp-for="DefaultProvider" class="form-label">المزود الافتراضي <span class="text-danger">*</span></label>
                            <select asp-for="DefaultProvider" class="form-select" disabled>
                                <option value="">اختر المزود</option>
                                <option value="YouTube">YouTube</option>
                                <option value="Vimeo">Vimeo</option>
                                <option value="BunnyStream">Bunny Stream</option>
                                <option value="Cloudflare">Cloudflare Stream</option>
                                <option value="Local">استضافة محلية</option>
                            </select>
                            <small class="text-muted">لا يمكن تغيير المزود بعد الإنشاء</small>
                            <input type="hidden" asp-for="DefaultProvider" />
                        </div>

                        <div class="mb-3">
                            <label asp-for="ApiKey" class="form-label">مفتاح API</label>
                            <input asp-for="ApiKey" type="password" class="form-control" />
                            <span asp-validation-for="ApiKey" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="ApiSecret" class="form-label">المفتاح السري</label>
                            <input asp-for="ApiSecret" type="password" class="form-control" />
                            <span asp-validation-for="ApiSecret" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="StorageZone" class="form-label">منطقة التخزين</label>
                            <input asp-for="StorageZone" class="form-control" />
                            <span asp-validation-for="StorageZone" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="CdnUrl" class="form-label">رابط CDN</label>
                            <input asp-for="CdnUrl" class="form-control" type="url" placeholder="https://" />
                            <span asp-validation-for="CdnUrl" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">@Html.T("إعدادات التشغيل", "Playback settings")</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="DefaultQuality" class="form-label">الجودة الافتراضية</label>
                                <select asp-for="DefaultQuality" class="form-select">
                                    <option value="Auto">تلقائي</option>
                                    <option value="1080p">1080p - Full HD</option>
                                    <option value="720p">720p - HD</option>
                                    <option value="480p">480p</option>
                                    <option value="360p">360p</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label asp-for="MaxUploadSizeMB" class="form-label">الحد الأقصى لحجم التحميل (MB)</label>
                                <input asp-for="MaxUploadSizeMB" type="number" class="form-control" min="1" max="10000" />
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="AutoPlay" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="AutoPlay">
                                        <strong>التشغيل التلقائي</strong>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableDownload" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="EnableDownload">
                                        <strong>السماح بالتحميل</strong>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableWatermark" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="EnableWatermark">
                                        <strong>علامة مائية</strong>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="EnableCaptions" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="EnableCaptions">
                                        <strong>الترجمة</strong>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="RequireAuthentication" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="RequireAuthentication">
                                        <strong>يتطلب مصادقة</strong>
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="IsEnabled" class="form-check-input" type="checkbox" />
                                    <label class="form-check-label" asp-for="IsEnabled">
                                        <strong>تفعيل</strong>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-primary">
                        <i class="feather-save me-2"></i>حفظ التعديلات
                    </button>
                    <a asp-action="VideoSettings" class="btn btn-light">
                        <i class="feather-x me-2"></i>إلغاء
                    </a>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">
                            <i class="feather-info me-2"></i>معلومات
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="small text-muted">قم بتحديث إعدادات استضافة الفيديو الخاصة بك.</p>
                        
                        <div class="alert alert-info">
                            <strong>ملاحظة:</strong> تأكد من صحة البيانات لضمان عمل الفيديوهات بشكل صحيح.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

