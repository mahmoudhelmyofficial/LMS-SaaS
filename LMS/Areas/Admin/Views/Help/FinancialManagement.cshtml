@{
    ViewData["Title"] = "دليل الإدارة المالية";
}

@await Html.PartialAsync("_HelpStyles")

<!-- Page Header -->
<div class="page-header">
    <div class="page-header-left d-flex align-items-center">
        <div class="page-header-title">
            <h5 class="m-0">الإدارة المالية</h5>
        </div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">الرئيسية</a></li>
            <li class="breadcrumb-item"><a asp-action="Index">مركز المساعدة</a></li>
            <li class="breadcrumb-item active">الإدارة المالية</li>
        </ol>
    </div>
</div>

<div class="row">
    <div class="col-lg-3 mb-4">
        @await Html.PartialAsync("_HelpSidebar", "FinancialManagement")
    </div>
    
    <div class="col-lg-9">
        <!-- Hero -->
        <div class="help-content-hero">
            <div class="help-content-icon orange">
                <i class="feather-dollar-sign"></i>
            </div>
            <div>
                <h1>الإدارة المالية</h1>
                <p>إدارة المدفوعات والسحوبات والعمولات والمبالغ المستردة.</p>
            </div>
        </div>
        
        <!-- Payments -->
        <div class="help-section" id="payments">
            <h3><i class="feather-credit-card text-primary me-2"></i> إدارة المدفوعات</h3>
            
            <p>صفحة المدفوعات تعرض جميع المعاملات المالية:</p>
            
            <div class="row g-3 mb-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon green"><i class="feather-check-circle"></i></div>
                        <div>
                            <h6>مكتملة</h6>
                            <p>معاملات تمت بنجاح</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon orange"><i class="feather-clock"></i></div>
                        <div>
                            <h6>معلقة</h6>
                            <p>بانتظار التأكيد</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon red"><i class="feather-x-circle"></i></div>
                        <div>
                            <h6>فاشلة</h6>
                            <p>معاملات مرفوضة</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <a asp-area="Admin" asp-controller="Payments" asp-action="Index" class="btn btn-outline-primary" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-list me-2"></i>
                عرض المدفوعات
            </a>
        </div>
        
        <!-- Withdrawals -->
        <div class="help-section" id="withdrawals">
            <h3><i class="feather-send text-primary me-2"></i> طلبات السحب</h3>
            
            <div class="help-callout warning">
                <i class="feather-alert-triangle"></i>
                <div>
                    <strong>تنبيه:</strong> راجع طلبات السحب بعناية وتأكد من صحة بيانات الحساب قبل الموافقة.
                </div>
            </div>
            
            <h5>معالجة طلب سحب:</h5>
            <div class="help-steps-flow">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <h6>راجع الطلب</h6>
                        <p>المبلغ وطريقة السحب</p>
                    </div>
                    <div class="flow-arrow"><i class="feather-arrow-left"></i></div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <h6>تحقق من الرصيد</h6>
                        <p>تأكد من توفر المبلغ</p>
                    </div>
                    <div class="flow-arrow"><i class="feather-arrow-left"></i></div>
                </div>
                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <h6>نفذ التحويل</h6>
                        <p>ووافق على الطلب</p>
                    </div>
                </div>
            </div>
            
            <a asp-area="Admin" asp-controller="WithdrawalMethods" asp-action="Pending" class="btn btn-warning mt-3">
                <i class="feather-clock me-2"></i>
                طلبات معلقة
            </a>
        </div>
        
        <!-- Commissions -->
        <div class="help-section" id="commissions">
            <h3><i class="feather-percent text-primary me-2"></i> إعدادات العمولات</h3>
            
            <p>حدد نسبة المنصة من مبيعات المدرسين:</p>
            
            <div class="help-table-wrapper">
                <table class="help-table">
                    <thead>
                        <tr>
                            <th>الإعداد</th>
                            <th>الوصف</th>
                            <th>مثال</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>عمولة المنصة الافتراضية</strong></td>
                            <td>النسبة المقتطعة من كل عملية بيع</td>
                            <td>30%</td>
                        </tr>
                        <tr>
                            <td><strong>عمولة خاصة لمدرس</strong></td>
                            <td>نسبة مختلفة لمدرس معين</td>
                            <td>20% لمدرس VIP</td>
                        </tr>
                        <tr>
                            <td><strong>عمولة الإحالة</strong></td>
                            <td>نسبة المسوق بالعمولة</td>
                            <td>10%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <a asp-area="Admin" asp-controller="CommissionSettings" asp-action="Index" class="btn btn-outline-primary mt-3" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-settings me-2"></i>
                إعدادات العمولات
            </a>
        </div>
        
        <!-- Refunds -->
        <div class="help-section" id="refunds">
            <h3><i class="feather-rotate-ccw text-primary me-2"></i> المبالغ المستردة</h3>
            
            <p>معالجة طلبات استرداد الأموال:</p>
            
            <ul>
                <li>مراجعة سبب طلب الاسترداد</li>
                <li>التحقق من سياسة الاسترداد</li>
                <li>الموافقة أو الرفض مع التوضيح</li>
            </ul>
            
            <a asp-area="Admin" asp-controller="Refunds" asp-action="Index" class="btn btn-outline-primary" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-rotate-ccw me-2"></i>
                طلبات الاسترداد
            </a>
        </div>
        
        <!-- Navigation -->
        <div class="help-navigation">
            <a asp-action="CourseManagement" class="btn btn-outline-secondary">
                <i class="feather-arrow-right me-2"></i>
                السابق: إدارة الدورات
            </a>
            <a asp-action="MarketingTools" class="btn btn-primary" style="background: #1e3a5f; border-color: #1e3a5f;">
                التالي: أدوات التسويق
                <i class="feather-arrow-left ms-2"></i>
            </a>
        </div>
    </div>
</div>

