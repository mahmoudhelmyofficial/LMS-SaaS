@{
    ViewData["Title"] = "دليل الأمان والمراقبة";
}

@await Html.PartialAsync("_HelpStyles")

<!-- Page Header -->
<div class="page-header">
    <div class="page-header-left d-flex align-items-center">
        <div class="page-header-title">
            <h5 class="m-0">الأمان والمراقبة</h5>
        </div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">الرئيسية</a></li>
            <li class="breadcrumb-item"><a asp-action="Index">مركز المساعدة</a></li>
            <li class="breadcrumb-item active">الأمان والمراقبة</li>
        </ol>
    </div>
</div>

<div class="row">
    <div class="col-lg-3 mb-4">
        @await Html.PartialAsync("_HelpSidebar", "SecurityMonitoring")
    </div>
    
    <div class="col-lg-9">
        <!-- Hero -->
        <div class="help-content-hero">
            <div class="help-content-icon" style="background: linear-gradient(135deg, #d97706 0%, #fbbf24 100%);">
                <i class="feather-shield"></i>
            </div>
            <div>
                <h1>الأمان والمراقبة</h1>
                <p>حماية المنصة ومراقبة النشاط وضمان أمان البيانات.</p>
            </div>
        </div>
        
        <!-- Security Settings -->
        <div class="help-section" id="security-settings">
            <h3><i class="feather-lock text-primary me-2"></i> إعدادات الأمان</h3>
            
            <div class="help-callout danger">
                <i class="feather-alert-triangle"></i>
                <div>
                    <strong>تحذير:</strong> إعدادات الأمان حساسة جداً. تأكد من فهم كل إعداد قبل تغييره.
                </div>
            </div>
            
            <div class="row g-3 mb-4">
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon blue"><i class="feather-key"></i></div>
                        <div>
                            <h6>سياسة كلمة المرور</h6>
                            <p>الحد الأدنى للطول والتعقيد</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon green"><i class="feather-smartphone"></i></div>
                        <div>
                            <h6>المصادقة الثنائية</h6>
                            <p>تفعيل 2FA للمستخدمين</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon orange"><i class="feather-clock"></i></div>
                        <div>
                            <h6>مهلة الجلسة</h6>
                            <p>مدة انتهاء الجلسة</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon red"><i class="feather-shield-off"></i></div>
                        <div>
                            <h6>حظر المحاولات الفاشلة</h6>
                            <p>عدد المحاولات قبل الحظر</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <a asp-area="Admin" asp-controller="SecuritySettings" asp-action="Index" class="btn btn-outline-primary" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-shield me-2"></i>
                إعدادات الأمان
            </a>
        </div>
        
        <!-- Login Logs -->
        <div class="help-section" id="login-logs">
            <h3><i class="feather-log-in text-primary me-2"></i> سجلات الدخول</h3>
            
            <p>تتبع جميع محاولات الدخول للمنصة:</p>
            
            <div class="help-table-wrapper">
                <table class="help-table">
                    <thead>
                        <tr>
                            <th>البيانات</th>
                            <th>الوصف</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>المستخدم</strong></td>
                            <td>اسم المستخدم أو البريد</td>
                        </tr>
                        <tr>
                            <td><strong>عنوان IP</strong></td>
                            <td>موقع المستخدم</td>
                        </tr>
                        <tr>
                            <td><strong>المتصفح/الجهاز</strong></td>
                            <td>نوع الجهاز المستخدم</td>
                        </tr>
                        <tr>
                            <td><strong>الحالة</strong></td>
                            <td>نجاح أو فشل</td>
                        </tr>
                        <tr>
                            <td><strong>التاريخ والوقت</strong></td>
                            <td>متى تمت المحاولة</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <a asp-area="Admin" asp-controller="LoginLogs" asp-action="Index" class="btn btn-outline-primary mt-3" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-list me-2"></i>
                سجلات الدخول
            </a>
        </div>
        
        <!-- Activity Logs -->
        <div class="help-section" id="activity-logs">
            <h3><i class="feather-activity text-primary me-2"></i> سجلات النشاط</h3>
            
            <p>تتبع الإجراءات الهامة في المنصة:</p>
            <ul>
                <li>إضافة/تعديل/حذف المستخدمين</li>
                <li>الموافقة/رفض الدورات</li>
                <li>تغييرات الإعدادات</li>
                <li>المعاملات المالية</li>
            </ul>
            
            <a asp-area="Admin" asp-controller="ActivityLogs" asp-action="Index" class="btn btn-outline-primary" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-activity me-2"></i>
                سجل النشاط
            </a>
        </div>
        
        <!-- Error Logs -->
        <div class="help-section" id="error-logs">
            <h3><i class="feather-alert-triangle text-primary me-2"></i> سجلات الأخطاء</h3>
            
            <p>راقب الأخطاء التقنية في المنصة:</p>
            
            <div class="help-callout info">
                <i class="feather-info"></i>
                <div>
                    <strong>نصيحة:</strong> راجع سجل الأخطاء دورياً لاكتشاف المشاكل قبل أن تؤثر على المستخدمين.
                </div>
            </div>
            
            <a asp-area="Admin" asp-controller="ErrorLogs" asp-action="Index" class="btn btn-outline-warning">
                <i class="feather-alert-triangle me-2"></i>
                سجل الأخطاء
            </a>
        </div>
        
        <!-- Proctoring -->
        <div class="help-section" id="proctoring">
            <h3><i class="feather-eye text-primary me-2"></i> مراقبة الاختبارات</h3>
            
            <p>إعدادات مراقبة نزاهة الاختبارات:</p>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon purple"><i class="feather-lock"></i></div>
                        <div>
                            <h6>قفل المتصفح</h6>
                            <p>منع الخروج من صفحة الاختبار</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="feature-card">
                        <div class="feature-icon teal"><i class="feather-camera"></i></div>
                        <div>
                            <h6>تسجيل الكاميرا</h6>
                            <p>التقاط صور أثناء الاختبار</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <a asp-area="Admin" asp-controller="Proctoring" asp-action="Index" class="btn btn-outline-primary mt-3" style="color: #1e3a5f; border-color: #1e3a5f;">
                <i class="feather-eye me-2"></i>
                إعدادات المراقبة
            </a>
        </div>
        
        <!-- Navigation -->
        <div class="help-navigation">
            <a asp-action="PlatformSettings" class="btn btn-outline-secondary">
                <i class="feather-arrow-right me-2"></i>
                السابق: إعدادات المنصة
            </a>
            <a asp-action="FAQ" class="btn btn-primary" style="background: #1e3a5f; border-color: #1e3a5f;">
                التالي: الأسئلة الشائعة
                <i class="feather-arrow-left ms-2"></i>
            </a>
        </div>
    </div>
</div>

