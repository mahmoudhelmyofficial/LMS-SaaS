@model LMS.Domain.Entities.Settings.Currency
@{
    ViewData["Title"] = Html.T("تفاصيل العملة", "Currency details") + $" - {Model.Code}";
    ViewData["Breadcrumbs"] = new List<(string Name, string? Url)>
    {
        (Html.T("العملات", "Currencies"), Url.Action("Index", "Currencies")),
        (Model.Code, null)
    };
}

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-coins me-2"></i>
                        @Model.Code - @Model.Name
                    </h5>
                    <div>
                        @if (Model.IsBaseCurrency)
                        {
                            <span class="badge bg-success">@Html.T("العملة الأساسية", "Base currency")</span>
                        }
                        @if (Model.IsActive)
                        {
                            <span class="badge bg-light text-dark">@Html.T("مفعّلة", "Active")</span>
                        }
                        else
                        {
                            <span class="badge bg-danger">@Html.T("معطّلة", "Inactive")</span>
                        }
                    </div>
                </div>
                <div class="card-body">
                    <div class="text-center mb-4">
                        <span class="display-1">@Model.Symbol</span>
                        @if (!string.IsNullOrEmpty(Model.SymbolAr))
                        {
                            <span class="display-4 text-muted ms-3">@Model.SymbolAr</span>
                        }
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="border-bottom pb-2 mb-3">@Html.T("المعلومات الأساسية", "Basic information")</h6>
                            <dl class="row">
                                <dt class="col-sm-5">@Html.T("رمز العملة", "Currency code"):</dt>
                                <dd class="col-sm-7"><strong>@Model.Code</strong></dd>

                                <dt class="col-sm-5">@Html.T("الاسم (إنجليزي)", "Name (English)"):</dt>
                                <dd class="col-sm-7">@Model.Name</dd>

                                <dt class="col-sm-5">@Html.T("الاسم (عربي)", "Name (Arabic)"):</dt>
                                <dd class="col-sm-7">@(Model.NameAr ?? "-")</dd>

                                <dt class="col-sm-5">@Html.T("الرمز", "Symbol"):</dt>
                                <dd class="col-sm-7">@Model.Symbol</dd>

                                <dt class="col-sm-5">@Html.T("الخانات العشرية", "Decimal places"):</dt>
                                <dd class="col-sm-7">@Model.DecimalPlaces</dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <h6 class="border-bottom pb-2 mb-3">@Html.T("الدولة وسعر الصرف", "Country & exchange rate")</h6>
                            <dl class="row">
                                <dt class="col-sm-5">@Html.T("الدولة", "Country"):</dt>
                                <dd class="col-sm-7">@(Model.Country ?? "-")</dd>

                                <dt class="col-sm-5">@Html.T("رمز الدولة", "Country code"):</dt>
                                <dd class="col-sm-7">@(Model.CountryCode ?? "-")</dd>

                                <dt class="col-sm-5">@Html.T("سعر الصرف", "Exchange rate"):</dt>
                                <dd class="col-sm-7">
                                    <strong class="text-primary">@Model.ExchangeRate.ToString("F4")</strong>
                                </dd>

                                <dt class="col-sm-5">@Html.T("آخر تحديث", "Last updated"):</dt>
                                <dd class="col-sm-7">
                                    @(Model.ExchangeRateUpdatedAt?.ToString("dd/MM/yyyy HH:mm") ?? "-")
                                </dd>

                                <dt class="col-sm-5">@Html.T("ترتيب العرض", "Display order"):</dt>
                                <dd class="col-sm-7">@Model.DisplayOrder</dd>
                            </dl>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6 class="border-bottom pb-2 mb-3">@Html.T("حدود المعاملات", "Transaction limits")</h6>
                            <dl class="row">
                                <dt class="col-sm-5">@Html.T("الحد الأدنى", "Minimum"):</dt>
                                <dd class="col-sm-7">
                                    @(Model.MinimumAmount.HasValue ? $"{Model.MinimumAmount:N2} {Model.Symbol}" : Html.T("لا يوجد", "None"))
                                </dd>

                                <dt class="col-sm-5">@Html.T("الحد الأقصى", "Maximum"):</dt>
                                <dd class="col-sm-7">
                                    @(Model.MaximumAmount.HasValue ? $"{Model.MaximumAmount:N2} {Model.Symbol}" : Html.T("لا يوجد", "None"))
                                </dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <h6 class="border-bottom pb-2 mb-3">@Html.T("الإعدادات", "Settings")</h6>
                            <dl class="row">
                                <dt class="col-sm-5">@Html.T("مدعومة للدفع", "Payment supported"):</dt>
                                <dd class="col-sm-7">
                                    @if (Model.IsPaymentSupported)
                                    {
                                        <span class="badge bg-success">@Html.T("نعم", "Yes")</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">@Html.T("لا", "No")</span>
                                    }
                                </dd>

                                <dt class="col-sm-5">@Html.T("موقع الرمز", "Symbol position"):</dt>
                                <dd class="col-sm-7">
                                    @(Model.SymbolAfterAmount ? Html.T("بعد المبلغ", "After amount") : Html.T("قبل المبلغ", "Before amount"))
                                </dd>

                                <dt class="col-sm-5">@Html.T("تاريخ الإنشاء", "Created at"):</dt>
                                <dd class="col-sm-7">@Model.CreatedAt.ToString("dd/MM/yyyy")</dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Example Display -->
                    <div class="alert alert-light mt-4">
                        <h6><i class="fas fa-eye me-2"></i>@Html.T("معاينة العرض", "Display preview")</h6>
                        @{
                            var sampleAmount = 1234.56m;
                            var formatted = Model.SymbolAfterAmount 
                                ? $"{sampleAmount.ToString($"N{Model.DecimalPlaces}")} {Model.Symbol}"
                                : $"{Model.Symbol}{sampleAmount.ToString($"N{Model.DecimalPlaces}")}";
                        }
                        <p class="fs-4 mb-0 text-center">@formatted</p>
                    </div>

                    <!-- Actions -->
                    <div class="d-flex justify-content-between mt-4">
                        <a asp-action="Index" class="btn btn-secondary">
                            <i class="fas fa-arrow-right me-1"></i>
                            @Html.T("رجوع للقائمة", "Back to list")
                        </a>
                        <div>
                            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">
                                <i class="fas fa-edit me-1"></i>
                                @Html.T("تعديل", "Edit")
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

