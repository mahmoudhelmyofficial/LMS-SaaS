@model LMS.Domain.Entities.Notifications.EmailTemplate

@{
    ViewData["Title"] = Html.T("Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", "Email template preview");
    Layout = null;
}

<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - @Model.Name</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f6f9;
            padding: 20px;
            direction: rtl;
        }
        
        .preview-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .preview-toolbar {
            background: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .preview-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .preview-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            text-decoration: none;
            color: white;
        }
        
        .btn-primary {
            background: #667eea;
        }
        
        .btn-primary:hover {
            background: #5568d3;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .device-selector {
            display: flex;
            gap: 5px;
            background: #f8f9fa;
            padding: 4px;
            border-radius: 6px;
        }
        
        .device-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .device-btn.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .email-container {
            background: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .email-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .email-subject {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        
        .email-meta {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            font-size: 14px;
            color: #6c757d;
        }
        
        .email-meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .email-body {
            padding: 30px;
            line-height: 1.8;
            color: #333;
            min-height: 400px;
        }
        
        .email-body img {
            max-width: 100%;
            height: auto;
        }
        
        .email-body a {
            color: #667eea;
            text-decoration: none;
        }
        
        .email-body a:hover {
            text-decoration: underline;
        }
        
        .email-footer {
            background: #f8f9fa;
            padding: 20px;
            border-top: 1px solid #dee2e6;
            font-size: 13px;
            color: #6c757d;
            text-align: center;
        }
        
        .preview-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .preview-info-text {
            color: #856404;
            font-size: 14px;
            margin: 0;
        }
        
        /* Responsive Design */
        .email-wrapper {
            transition: all 0.3s;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .email-wrapper.desktop {
            max-width: 800px;
        }
        
        .email-wrapper.tablet {
            max-width: 600px;
        }
        
        .email-wrapper.mobile {
            max-width: 375px;
        }
        
        @@media print {
            body {
                background: white;
                padding: 0;
            }
            .preview-toolbar,
            .preview-info {
                display: none;
            }
            .email-container {
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div class="preview-container">
        <!-- Preview Info -->
        <div class="preview-info">
            <p class="preview-info-text">
                âš ï¸ Ù‡Ø°Ù‡ Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ù„Ù‚Ø§Ù„Ø¨ - ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø¨Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            </p>
        </div>
        
        <!-- Toolbar -->
        <div class="preview-toolbar">
            <div class="preview-title">@Html.T("Ù…Ø¹Ø§ÙŠÙ†Ø©", "Preview"): @Model.Name</div>
            <div class="preview-actions">
                <!-- Device Selector -->
                <div class="device-selector">
                    <button class="device-btn active" data-device="desktop" title="@Html.T("Ø¹Ø±Ø¶ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨", "Desktop view")">
                        ğŸ–¥ï¸
                    </button>
                    <button class="device-btn" data-device="tablet" title="@Html.T("Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù„ÙˆØ­ÙŠ", "Tablet view")">
                        ğŸ“±
                    </button>
                    <button class="device-btn" data-device="mobile" title="@Html.T("Ø¹Ø±Ø¶ Ø§Ù„Ù‡Ø§ØªÙ", "Mobile view")">
                        ğŸ“±
                    </button>
                </div>
                
                <!-- Actions -->
                <button class="btn btn-secondary" onclick="window.print()">
                    ğŸ–¨ï¸ @Html.T("Ø·Ø¨Ø§Ø¹Ø©", "Print")
                </button>
                <a href="@Url.Action("Test", "EmailTemplates", new { id = Model.Id })" class="btn btn-success">
                    ğŸ“§ @Html.T("Ø¥Ø±Ø³Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ", "Send test")
                </a>
                <a href="@Url.Action("Details", "EmailTemplates", new { id = Model.Id })" class="btn btn-primary">
                    âœï¸ @Html.T("ØªØ¹Ø¯ÙŠÙ„", "Edit")
                </a>
            </div>
        </div>
        
        <!-- Email Preview -->
        <div class="email-wrapper desktop" id="emailWrapper">
            <div class="email-container">
                <!-- Email Header -->
                <div class="email-header">
                    <div class="email-subject">@Model.Subject</div>
                    <div class="email-meta">
                        <div class="email-meta-item">
                            <span>Ù…Ù†:</span>
                            <strong>Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… &lt;noreply@example.com&gt;</strong>
                        </div>
                        <div class="email-meta-item">
                            <span>Ø¥Ù„Ù‰:</span>
                            <strong>user@example.com</strong>
                        </div>
                        <div class="email-meta-item">
                            <span>Ø§Ù„ØªØ§Ø±ÙŠØ®:</span>
                            <strong>@DateTime.Now.ToString("dd/MM/yyyy hh:mm tt")</strong>
                        </div>
                    </div>
                </div>
                
                <!-- Email Body -->
                <div class="email-body">
                    @{
                        // Replace variables with sample data for preview
                        var previewBody = Model.Body
                            .Replace("{{UserName}}", "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯")
                            .Replace("{{Email}}", "user@example.com")
                            .Replace("{{CourseName}}", "ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©")
                            .Replace("{{InstructorName}}", "Ø¯. Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ")
                            .Replace("{{CompanyName}}", "Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…")
                            .Replace("{{SiteUrl}}", "https://example.com")
                            .Replace("{{CurrentYear}}", DateTime.Now.Year.ToString())
                            .Replace("{{VerificationLink}}", "#verify-email")
                            .Replace("{{ResetLink}}", "#reset-password")
                            .Replace("{{OrderNumber}}", "ORD-2024-12345")
                            .Replace("{{Amount}}", "500 Ø±ÙŠØ§Ù„")
                            .Replace("{{Date}}", DateTime.Now.ToString("dd/MM/yyyy"));
                    }
                    @Html.Raw(previewBody)
                </div>
                
                <!-- Email Footer -->
                <div class="email-footer">
                    <p>Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© Ø¢Ù„ÙŠØ©ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¹Ø¯Ù… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§.</p>
                    <p>Â© @DateTime.Now.Year Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                    <p>
                        <a href="#">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</a> | 
                        <a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> | 
                        <a href="#">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Device switcher
        document.querySelectorAll('.device-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Get device type
                const device = this.dataset.device;
                
                // Update wrapper class
                const wrapper = document.getElementById('emailWrapper');
                wrapper.className = 'email-wrapper ' + device;
            });
        });
    </script>
</body>
</html>

