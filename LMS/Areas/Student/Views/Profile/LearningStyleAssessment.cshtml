@{
    ViewData["Title"] = Html.T("تقييم أسلوب التعلم", "Learning Style Assessment");
}

@section Styles {
<style>
    .assessment-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 12px;
        padding: 40px;
        margin-bottom: 30px;
        text-align: center;
    }
    
    .assessment-container {
        background: white;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .question-card {
        background: #f9fafb;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 24px;
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
    }
    
    .question-card.active {
        border-color: #667eea;
        background: white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
    }
    
    .question-number {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 18px;
        margin-left: 16px;
    }
    
    .question-text {
        font-size: 16px;
        font-weight: 600;
        color: #1f2937;
        flex: 1;
    }
    
    .answer-option {
        background: white;
        border: 2px solid #e5e7eb;
        border-radius: 10px;
        padding: 16px 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
    }
    
    .answer-option:hover {
        border-color: #667eea;
        background: #f0f9ff;
        transform: translateX(-4px);
    }
    
    .answer-option.selected {
        border-color: #667eea;
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
    }
    
    .answer-option input[type="radio"] {
        width: 20px;
        height: 20px;
        margin-left: 12px;
        cursor: pointer;
        accent-color: #667eea;
    }
    
    .answer-label {
        flex: 1;
        cursor: pointer;
        font-size: 15px;
    }
    
    .progress-bar-container {
        background: #e5e7eb;
        height: 8px;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 30px;
    }
    
    .progress-bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.5s ease;
    }
    
    .progress-text {
        text-align: center;
        color: #6b7280;
        margin-bottom: 16px;
        font-size: 14px;
    }
    
    .learning-style-result {
        text-align: center;
        padding: 40px;
    }
    
    .result-icon {
        width: 120px;
        height: 120px;
        margin: 0 auto 24px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 60px;
        color: white;
    }
    
    .result-title {
        font-size: 32px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 16px;
    }
    
    .result-description {
        font-size: 16px;
        color: #6b7280;
        max-width: 600px;
        margin: 0 auto 32px;
        line-height: 1.8;
    }
    
    .characteristics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 32px;
    }
    
    .characteristic-card {
        background: #f9fafb;
        border-radius: 12px;
        padding: 20px;
        text-align: right;
    }
    
    .characteristic-card h6 {
        color: #667eea;
        margin-bottom: 12px;
        font-weight: 600;
    }
    
    .characteristic-card ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }
    
    .characteristic-card li {
        padding: 8px 0;
        color: #6b7280;
        position: relative;
        padding-right: 24px;
    }
    
    .characteristic-card li::before {
        content: "✓";
        position: absolute;
        right: 0;
        color: #22c55e;
        font-weight: 700;
    }
    
    .btn-navigation {
        padding: 12px 32px;
        font-weight: 600;
        border-radius: 10px;
    }
    
    .intro-section {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        text-align: center;
    }
    
    .intro-section h5 {
        color: #92400e;
        margin-bottom: 16px;
    }
    
    .intro-section p {
        color: #78350f;
        margin: 0;
    }
</style>
}

<!-- Alert Messages -->
@await Html.PartialAsync("_AlertMessage")

<!-- Header -->
<div class="assessment-header">
    <h1 class="mb-3">
        <i class="feather-brain me-2"></i>
        @Html.T("اكتشف أسلوب التعلم الخاص بك", "Discover Your Learning Style")
    </h1>
    <p class="mb-0 opacity-75">
        @Html.T("اختبار قصير لمعرفة الطريقة الأفضل للتعلم التي تناسبك", "A short quiz to find the best learning method for you")
    </p>
</div>

<!-- Intro Section -->
<div class="intro-section" id="introSection">
    <div class="mb-4">
        <i class="feather-info" style="font-size: 48px; color: #f59e0b;"></i>
    </div>
    <h5>@Html.T("لماذا معرفة أسلوب التعلم مهمة؟", "Why is knowing your learning style important?")</h5>
    <p class="mb-4">
        @Html.T("فهم أسلوب التعلم الخاص بك يساعدك على:", "Understanding your learning style helps you to:")
        <br>
        ✓ @Html.T("اختيار الدورات والطرق التعليمية الأنسب لك", "Choose the most suitable courses and learning methods")
        <br>
        ✓ @Html.T("زيادة فعالية وسرعة التعلم", "Increase learning effectiveness and speed")
        <br>
        ✓ @Html.T("الاستمتاع أكثر بعملية التعلم", "Enjoy the learning process more")
    </p>
    <div class="alert alert-warning mb-4" style="background: rgba(255,255,255,0.7); border: none;">
        <i class="feather-clock me-2"></i>
        <strong>@Html.T("الوقت المتوقع:", "Estimated Time:")</strong> @Html.T("3-5 دقائق", "3-5 minutes") | <strong>@Html.T("عدد الأسئلة:", "Number of Questions:")</strong> @Html.T("12 سؤال", "12 questions")
    </div>
    <button class="btn btn-primary btn-lg" onclick="startAssessment()">
        <i class="feather-play me-2"></i>
        @Html.T("ابدأ الاختبار الآن", "Start the Quiz Now")
    </button>
</div>

<!-- Assessment Container -->
<div class="assessment-container" id="assessmentContainer" style="display: none;">
    <!-- Progress Bar -->
    <div class="progress-text" id="progressText">
        @Html.T("السؤال", "Question") <span id="currentQuestion">1</span> @Html.T("من", "of") <span id="totalQuestions">12</span>
    </div>
    <div class="progress-bar-container">
        <div class="progress-bar-fill" id="progressBar" style="width: 8.33%"></div>
    </div>
    
    <!-- Questions Form -->
    <form id="assessmentForm">
        <!-- Question 1: Visual Learner -->
        <div class="question-card active" data-question="1" data-category="visual">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">1</div>
                <div class="question-text">@Html.T("عندما أحاول تذكر معلومة جديدة، أجد أنني:", "When I try to remember new information, I find that I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q1" value="visual" required>
                    <span class="answer-label">@Html.T("أتذكر الصور والرسوم البيانية بشكل أفضل", "Remember images and charts better")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q1" value="auditory">
                    <span class="answer-label">@Html.T("أتذكر ما سمعته من شرح أو محاضرة", "Remember what I heard from an explanation or lecture")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q1" value="kinesthetic">
                    <span class="answer-label">@Html.T("أتذكر من خلال التطبيق العملي والتجربة", "Remember through hands-on practice and experience")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q1" value="reading">
                    <span class="answer-label">@Html.T("أتذكر ما قرأته من نصوص ومقالات", "Remember what I read from texts and articles")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 2 -->
        <div class="question-card" data-question="2" data-category="auditory">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">2</div>
                <div class="question-text">@Html.T("أفضل طريقة لتعلم موضوع جديد بالنسبة لي هي:", "The best way for me to learn a new topic is:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q2" value="visual">
                    <span class="answer-label">@Html.T("مشاهدة فيديوهات تعليمية ورسوم توضيحية", "Watching educational videos and illustrations")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q2" value="auditory">
                    <span class="answer-label">@Html.T("الاستماع إلى شرح مفصل أو بودكاست", "Listening to a detailed explanation or podcast")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q2" value="kinesthetic">
                    <span class="answer-label">@Html.T("التجربة والممارسة العملية المباشرة", "Direct hands-on experimentation and practice")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q2" value="reading">
                    <span class="answer-label">@Html.T("قراءة كتب ومقالات تفصيلية", "Reading detailed books and articles")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 3 -->
        <div class="question-card" data-question="3" data-category="kinesthetic">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">3</div>
                <div class="question-text">@Html.T("عند محاولة تعلم مهارة جديدة، أنا:", "When trying to learn a new skill, I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q3" value="visual">
                    <span class="answer-label">@Html.T("أبحث عن صور ومخططات توضيحية", "Search for images and illustrative diagrams")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q3" value="auditory">
                    <span class="answer-label">@Html.T("أفضل أن يشرح لي شخص كيف أفعلها", "Prefer someone to explain how to do it")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q3" value="kinesthetic">
                    <span class="answer-label">@Html.T("أبدأ مباشرة بالتجربة والخطأ", "Start directly with trial and error")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q3" value="reading">
                    <span class="answer-label">@Html.T("أقرأ التعليمات والدليل بالتفصيل", "Read the instructions and manual in detail")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 4 -->
        <div class="question-card" data-question="4" data-category="reading">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">4</div>
                <div class="question-text">@Html.T("في بيئة الدراسة، أنا أفضل:", "In a study environment, I prefer:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q4" value="visual">
                    <span class="answer-label">@Html.T("استخدام الألوان والرسوم البيانية في الملاحظات", "Using colors and charts in notes")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q4" value="auditory">
                    <span class="answer-label">@Html.T("المناقشة مع الآخرين أو تسجيل الملاحظات صوتياً", "Discussing with others or recording notes verbally")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q4" value="kinesthetic">
                    <span class="answer-label">@Html.T("بيئة تفاعلية مع إمكانية التطبيق العملي", "Interactive environment with hands-on application")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q4" value="reading">
                    <span class="answer-label">@Html.T("القراءة الهادئة وكتابة الملاحظات التفصيلية", "Quiet reading and writing detailed notes")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 5 -->
        <div class="question-card" data-question="5" data-category="visual">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">5</div>
                <div class="question-text">@Html.T("عندما أشرح فكرة للآخرين، أميل إلى:", "When I explain an idea to others, I tend to:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q5" value="visual">
                    <span class="answer-label">@Html.T("رسم مخططات أو استخدام أمثلة بصرية", "Drawing diagrams or using visual examples")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q5" value="auditory">
                    <span class="answer-label">@Html.T("الشرح بالكلام والتفصيل الشفهي", "Explaining verbally in detail")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q5" value="kinesthetic">
                    <span class="answer-label">@Html.T("استخدام الإيماءات والعروض العملية", "Using gestures and practical demonstrations")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q5" value="reading">
                    <span class="answer-label">@Html.T("كتابة الفكرة بالتفصيل على الورق", "Writing the idea down in detail on paper")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 6 -->
        <div class="question-card" data-question="6" data-category="auditory">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">6</div>
                <div class="question-text">@Html.T("في وقت الفراغ، أفضل:", "In my free time, I prefer:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q6" value="visual">
                    <span class="answer-label">@Html.T("مشاهدة أفلام وثائقية أو فيديوهات", "Watching documentaries or videos")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q6" value="auditory">
                    <span class="answer-label">@Html.T("الاستماع إلى بودكاست أو كتب صوتية", "Listening to podcasts or audiobooks")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q6" value="kinesthetic">
                    <span class="answer-label">@Html.T("ممارسة الرياضة أو هواية عملية", "Playing sports or a hands-on hobby")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q6" value="reading">
                    <span class="answer-label">@Html.T("قراءة الكتب والمجلات", "Reading books and magazines")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 7 -->
        <div class="question-card" data-question="7" data-category="kinesthetic">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">7</div>
                <div class="question-text">@Html.T("أثناء التفكير في مشكلة معقدة، أنا:", "When thinking about a complex problem, I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q7" value="visual">
                    <span class="answer-label">@Html.T("أرسم مخططات ورسوم بيانية", "Draw diagrams and charts")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q7" value="auditory">
                    <span class="answer-label">@Html.T("أتحدث عنها مع الآخرين أو أفكر بصوت عالٍ", "Talk about it with others or think out loud")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q7" value="kinesthetic">
                    <span class="answer-label">@Html.T("أتحرك وأستخدم يدي للتفكير", "Move around and use my hands to think")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q7" value="reading">
                    <span class="answer-label">@Html.T("أكتب قائمة بالأفكار والحلول", "Write a list of ideas and solutions")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 8 -->
        <div class="question-card" data-question="8" data-category="reading">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">8</div>
                <div class="question-text">@Html.T("عندما أتلقى تعليمات، أفضل أن تكون:", "When receiving instructions, I prefer them to be:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q8" value="visual">
                    <span class="answer-label">@Html.T("على شكل صور أو فيديو توضيحي", "In the form of images or explanatory video")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q8" value="auditory">
                    <span class="answer-label">@Html.T("شرح شفهي مباشر", "Direct verbal explanation")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q8" value="kinesthetic">
                    <span class="answer-label">@Html.T("عرض عملي أستطيع تكراره", "Practical demonstration I can repeat")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q8" value="reading">
                    <span class="answer-label">@Html.T("تعليمات مكتوبة خطوة بخطوة", "Written step-by-step instructions")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 9 -->
        <div class="question-card" data-question="9" data-category="visual">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">9</div>
                <div class="question-text">@Html.T("عند حضور محاضرة، أفضل أن:", "When attending a lecture, I prefer to:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q9" value="visual">
                    <span class="answer-label">@Html.T("أرى شرائح عرض وصور توضيحية", "See presentation slides and illustrations")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q9" value="auditory">
                    <span class="answer-label">@Html.T("أستمع للمحاضر بتركيز", "Listen to the lecturer with focus")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q9" value="kinesthetic">
                    <span class="answer-label">@Html.T("أشارك في أنشطة تفاعلية", "Participate in interactive activities")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q9" value="reading">
                    <span class="answer-label">@Html.T("أحصل على ملاحظات مكتوبة للمراجعة", "Get written notes for review")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 10 -->
        <div class="question-card" data-question="10" data-category="auditory">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">10</div>
                <div class="question-text">@Html.T("لتذكر معلومة مهمة، أقوم بـ:", "To remember important information, I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q10" value="visual">
                    <span class="answer-label">@Html.T("إنشاء خريطة ذهنية ملونة", "Create a colorful mind map")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q10" value="auditory">
                    <span class="answer-label">@Html.T("تكرارها بصوت عالٍ عدة مرات", "Repeat it out loud several times")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q10" value="kinesthetic">
                    <span class="answer-label">@Html.T("ربطها بحركة أو نشاط معين", "Associate it with a movement or specific activity")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q10" value="reading">
                    <span class="answer-label">@Html.T("كتابتها عدة مرات", "Write it down several times")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 11 -->
        <div class="question-card" data-question="11" data-category="kinesthetic">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">11</div>
                <div class="question-text">@Html.T("في اجتماع أو ورشة عمل، أنا:", "In a meeting or workshop, I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q11" value="visual">
                    <span class="answer-label">@Html.T("أركز على العروض التقديمية والمخططات", "Focus on presentations and diagrams")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q11" value="auditory">
                    <span class="answer-label">@Html.T("أشارك في المناقشات والحوارات", "Participate in discussions and conversations")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q11" value="kinesthetic">
                    <span class="answer-label">@Html.T("أفضل الأنشطة الجماعية التفاعلية", "Prefer interactive group activities")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q11" value="reading">
                    <span class="answer-label">@Html.T("أدون ملاحظات تفصيلية", "Take detailed notes")</span>
                </label>
            </div>
        </div>
        
        <!-- Question 12 -->
        <div class="question-card" data-question="12" data-category="reading">
            <div class="d-flex align-items-center mb-4">
                <div class="question-number">12</div>
                <div class="question-text">@Html.T("لتحضير لاختبار مهم، أنا:", "To prepare for an important test, I:")</div>
            </div>
            <div class="answer-options">
                <label class="answer-option">
                    <input type="radio" name="q12" value="visual">
                    <span class="answer-label">@Html.T("أراجع الرسوم البيانية والملخصات المرئية", "Review charts and visual summaries")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q12" value="auditory">
                    <span class="answer-label">@Html.T("أناقش المادة مع زملائي أو أسجل الملاحظات", "Discuss the material with classmates or record notes")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q12" value="kinesthetic">
                    <span class="answer-label">@Html.T("أطبق ما تعلمته من خلال تمارين عملية", "Apply what I learned through practical exercises")</span>
                </label>
                <label class="answer-option">
                    <input type="radio" name="q12" value="reading">
                    <span class="answer-label">@Html.T("أقرأ الملاحظات وأعيد كتابتها", "Read notes and rewrite them")</span>
                </label>
            </div>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary btn-navigation" id="prevBtn" onclick="previousQuestion()" disabled>
                <i class="feather-chevron-right me-2"></i>
                @Html.T("السابق", "Previous")
            </button>
            <button type="button" class="btn btn-primary btn-navigation" id="nextBtn" onclick="nextQuestion()">
                @Html.T("التالي", "Next")
                <i class="feather-chevron-left ms-2"></i>
            </button>
            <button type="button" class="btn btn-success btn-navigation" id="submitBtn" onclick="submitAssessment()" style="display: none;">
                <i class="feather-check me-2"></i>
                @Html.T("عرض النتيجة", "Show Results")
            </button>
        </div>
    </form>
</div>

<!-- Results Section -->
<div class="assessment-container" id="resultsContainer" style="display: none;">
    <div class="learning-style-result">
        <div class="result-icon" id="resultIcon">
            <i class="feather-eye"></i>
        </div>
        <h2 class="result-title" id="resultTitle">@Html.T("متعلم بصري", "Visual Learner")</h2>
        <p class="result-description" id="resultDescription">
            @Html.T("أنت تتعلم بشكل أفضل من خلال المحتوى المرئي مثل الصور والفيديوهات والرسوم البيانية.", "You learn best through visual content such as images, videos, and charts.")
        </p>
        
        <div class="characteristics-grid" id="characteristicsGrid">
            <!-- Will be populated dynamically -->
        </div>
        
        <div class="mt-5">
            <a href="@Url.Action("Index", "Profile")" class="btn btn-primary btn-lg">
                <i class="feather-user me-2"></i>
                @Html.T("العودة للملف الشخصي", "Back to Profile")
            </a>
            <button class="btn btn-outline-secondary btn-lg ms-2" onclick="restartAssessment()">
                <i class="feather-refresh-cw me-2"></i>
                @Html.T("إعادة الاختبار", "Retake the Quiz")
            </button>
        </div>
    </div>
</div>

@section Scripts {
<script>
    const totalQuestions = 12;
    let currentQuestionIndex = 1;
    let answers = {};
    
    const learningStyles = {
        visual: {
            title: "@Html.Raw(Html.T("متعلم بصري", "Visual Learner"))",
            icon: "feather-eye",
            description: "@Html.Raw(Html.T("أنت تتعلم بشكل أفضل من خلال المحتوى المرئي مثل الصور والفيديوهات والرسوم البيانية والخرائط الذهنية. تفضل رؤية المعلومات بدلاً من سماعها.", "You learn best through visual content such as images, videos, charts, and mind maps. You prefer seeing information rather than hearing it."))",
            characteristics: {
                "@Html.Raw(Html.T("نقاط القوة", "Strengths"))": [
                    "@Html.Raw(Html.T("تذكر الوجوه والأماكن بسهولة", "Easily remember faces and places"))",
                    "@Html.Raw(Html.T("تفضيل الرسوم البيانية والمخططات", "Preference for charts and diagrams"))",
                    "@Html.Raw(Html.T("القدرة على تصور المفاهيم", "Ability to visualize concepts"))",
                    "@Html.Raw(Html.T("حب التنظيم البصري والألوان", "Love of visual organization and colors"))"
                ],
                "@Html.Raw(Html.T("استراتيجيات التعلم المثلى", "Optimal Learning Strategies"))": [
                    "@Html.Raw(Html.T("استخدام الخرائط الذهنية", "Using mind maps"))",
                    "@Html.Raw(Html.T("مشاهدة الفيديوهات التعليمية", "Watching educational videos"))",
                    "@Html.Raw(Html.T("استخدام الألوان في الملاحظات", "Using colors in notes"))",
                    "@Html.Raw(Html.T("رسم المخططات التوضيحية", "Drawing illustrative diagrams"))"
                ],
                "@Html.Raw(Html.T("الدورات المناسبة", "Suitable Courses"))": [
                    "@Html.Raw(Html.T("دورات تحتوي على فيديوهات عالية الجودة", "Courses with high-quality videos"))",
                    "@Html.Raw(Html.T("دورات مع رسوم توضيحية ومخططات", "Courses with illustrations and diagrams"))",
                    "@Html.Raw(Html.T("دورات التصميم والجرافيك", "Design and graphics courses"))",
                    "@Html.Raw(Html.T("دورات البرمجة مع أمثلة مرئية", "Programming courses with visual examples"))"
                ]
            }
        },
        auditory: {
            title: "@Html.Raw(Html.T("متعلم سمعي", "Auditory Learner"))",
            icon: "feather-headphones",
            description: "@Html.Raw(Html.T("أنت تتعلم بشكل أفضل من خلال الاستماع والمناقشة. تفضل المحاضرات الصوتية والبودكاست والمناقشات الجماعية.", "You learn best through listening and discussion. You prefer audio lectures, podcasts, and group discussions."))",
            characteristics: {
                "@Html.Raw(Html.T("نقاط القوة", "Strengths"))": [
                    "@Html.Raw(Html.T("الاستيعاب الجيد من المحاضرات", "Good comprehension from lectures"))",
                    "@Html.Raw(Html.T("التذكر من خلال التكرار الصوتي", "Remembering through audio repetition"))",
                    "@Html.Raw(Html.T("الاستفادة من المناقشات", "Benefiting from discussions"))",
                    "@Html.Raw(Html.T("القدرة على التعلم أثناء الاستماع", "Ability to learn while listening"))"
                ],
                "@Html.Raw(Html.T("استراتيجيات التعلم المثلى", "Optimal Learning Strategies"))": [
                    "@Html.Raw(Html.T("الاستماع للبودكاست التعليمي", "Listening to educational podcasts"))",
                    "@Html.Raw(Html.T("المشاركة في المناقشات", "Participating in discussions"))",
                    "@Html.Raw(Html.T("تسجيل الملاحظات صوتياً", "Recording notes verbally"))",
                    "@Html.Raw(Html.T("الشرح للآخرين بصوت عالٍ", "Explaining to others out loud"))"
                ],
                "@Html.Raw(Html.T("الدورات المناسبة", "Suitable Courses"))": [
                    "@Html.Raw(Html.T("دورات مع محاضرات صوتية واضحة", "Courses with clear audio lectures"))",
                    "@Html.Raw(Html.T("دورات البودكاست والكتب الصوتية", "Podcast and audiobook courses"))",
                    "@Html.Raw(Html.T("دورات اللغات", "Language courses"))",
                    "@Html.Raw(Html.T("دورات مع مناقشات جماعية", "Courses with group discussions"))"
                ]
            }
        },
        kinesthetic: {
            title: "@Html.Raw(Html.T("متعلم حركي عملي", "Kinesthetic/Practical Learner"))",
            icon: "feather-activity",
            description: "@Html.Raw(Html.T("أنت تتعلم بشكل أفضل من خلال التطبيق العملي والتجربة المباشرة. تفضل التدريب العملي والأنشطة التفاعلية.", "You learn best through hands-on practice and direct experience. You prefer practical training and interactive activities."))",
            characteristics: {
                "@Html.Raw(Html.T("نقاط القوة", "Strengths"))": [
                    "@Html.Raw(Html.T("التعلم السريع من الممارسة", "Quick learning from practice"))",
                    "@Html.Raw(Html.T("القدرة على حل المشكلات عملياً", "Ability to solve problems practically"))",
                    "@Html.Raw(Html.T("الاستفادة من التجربة والخطأ", "Benefiting from trial and error"))",
                    "@Html.Raw(Html.T("حب الأنشطة التفاعلية", "Love of interactive activities"))"
                ],
                "@Html.Raw(Html.T("استراتيجيات التعلم المثلى", "Optimal Learning Strategies"))": [
                    "@Html.Raw(Html.T("التطبيق العملي الفوري", "Immediate hands-on application"))",
                    "@Html.Raw(Html.T("المشاريع والتمارين العملية", "Projects and practical exercises"))",
                    "@Html.Raw(Html.T("استخدام المحاكاة والتجارب", "Using simulations and experiments"))",
                    "@Html.Raw(Html.T("التعلم من خلال البناء والإنشاء", "Learning through building and creating"))"
                ],
                "@Html.Raw(Html.T("الدورات المناسبة", "Suitable Courses"))": [
                    "@Html.Raw(Html.T("دورات البرمجة مع مشاريع عملية", "Programming courses with practical projects"))",
                    "@Html.Raw(Html.T("دورات التصميم والبناء", "Design and building courses"))",
                    "@Html.Raw(Html.T("دورات المهارات اليدوية", "Hands-on skills courses"))",
                    "@Html.Raw(Html.T("دورات مع معامل افتراضية", "Courses with virtual labs"))"
                ]
            }
        },
        reading: {
            title: "@Html.Raw(Html.T("متعلم قرائي/كتابي", "Reading/Writing Learner"))",
            icon: "feather-book-open",
            description: "@Html.Raw(Html.T("أنت تتعلم بشكل أفضل من خلال القراءة والكتابة. تفضل النصوص المكتوبة والملاحظات التفصيلية.", "You learn best through reading and writing. You prefer written texts and detailed notes."))",
            characteristics: {
                "@Html.Raw(Html.T("نقاط القوة", "Strengths"))": [
                    "@Html.Raw(Html.T("الاستيعاب الجيد من القراءة", "Good comprehension from reading"))",
                    "@Html.Raw(Html.T("القدرة على التركيز في النصوص", "Ability to focus on texts"))",
                    "@Html.Raw(Html.T("حب كتابة الملاحظات", "Love of note-taking"))",
                    "@Html.Raw(Html.T("التنظيم الجيد للمعلومات", "Good organization of information"))"
                ],
                "@Html.Raw(Html.T("استراتيجيات التعلم المثلى", "Optimal Learning Strategies"))": [
                    "@Html.Raw(Html.T("قراءة الكتب والمقالات", "Reading books and articles"))",
                    "@Html.Raw(Html.T("كتابة ملخصات تفصيلية", "Writing detailed summaries"))",
                    "@Html.Raw(Html.T("استخدام القوائم والجداول", "Using lists and tables"))",
                    "@Html.Raw(Html.T("إعادة كتابة المعلومات", "Rewriting information"))"
                ],
                "@Html.Raw(Html.T("الدورات المناسبة", "Suitable Courses"))": [
                    "@Html.Raw(Html.T("دورات مع مواد قرائية غنية", "Courses with rich reading materials"))",
                    "@Html.Raw(Html.T("دورات الكتابة والتأليف", "Writing and authoring courses"))",
                    "@Html.Raw(Html.T("دورات البحث العلمي", "Scientific research courses"))",
                    "@Html.Raw(Html.T("دورات مع ملفات PDF مفصلة", "Courses with detailed PDF files"))"
                ]
            }
        }
    };
    
    function startAssessment() {
        document.getElementById('introSection').style.display = 'none';
        document.getElementById('assessmentContainer').style.display = 'block';
        showQuestion(1);
    }
    
    function showQuestion(questionNumber) {
        document.querySelectorAll('.question-card').forEach(card => {
            card.classList.remove('active');
            card.style.display = 'none';
        });
        
        const currentCard = document.querySelector(`.question-card[data-question="${questionNumber}"]`);
        if (currentCard) {
            currentCard.style.display = 'block';
            setTimeout(() => currentCard.classList.add('active'), 50);
        }
        
        currentQuestionIndex = questionNumber;
        updateProgress();
        updateButtons();
    }
    
    function updateProgress() {
        const progress = (currentQuestionIndex / totalQuestions) * 100;
        document.getElementById('progressBar').style.width = progress + '%';
        document.getElementById('currentQuestion').textContent = currentQuestionIndex;
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function updateButtons() {
        document.getElementById('prevBtn').disabled = currentQuestionIndex === 1;
        
        if (currentQuestionIndex === totalQuestions) {
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'inline-block';
        } else {
            document.getElementById('nextBtn').style.display = 'inline-block';
            document.getElementById('submitBtn').style.display = 'none';
        }
    }
    
    function nextQuestion() {
        const currentInput = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
        if (!currentInput) {
            alert('@Html.Raw(Html.T("يرجى اختيار إجابة قبل المتابعة", "Please select an answer before continuing").Replace("'", "\\'"))');
            return;
        }
        
        answers[`q${currentQuestionIndex}`] = currentInput.value;
        
        if (currentQuestionIndex < totalQuestions) {
            showQuestion(currentQuestionIndex + 1);
        }
    }
    
    function previousQuestion() {
        if (currentQuestionIndex > 1) {
            showQuestion(currentQuestionIndex - 1);
        }
    }
    
    function submitAssessment() {
        // Check if last question is answered
        const lastInput = document.querySelector(`input[name="q${totalQuestions}"]:checked`);
        if (!lastInput) {
            alert('@Html.Raw(Html.T("يرجى اختيار إجابة قبل إنهاء الاختبار", "Please select an answer before finishing the quiz").Replace("'", "\\'"))');
            return;
        }
        answers[`q${totalQuestions}`] = lastInput.value;
        
        // Calculate results
        const scores = { visual: 0, auditory: 0, kinesthetic: 0, reading: 0 };
        Object.values(answers).forEach(answer => {
            scores[answer]++;
        });
        
        // Find dominant learning style
        let dominantStyle = 'visual';
        let maxScore = 0;
        Object.entries(scores).forEach(([style, score]) => {
            if (score > maxScore) {
                maxScore = score;
                dominantStyle = style;
            }
        });
        
        // Display results
        displayResults(dominantStyle, scores);
        
        // Save to server
        saveLearningStyle(dominantStyle, scores);
    }
    
    function displayResults(style, scores) {
        const styleData = learningStyles[style];
        
        document.getElementById('resultIcon').innerHTML = `<i class="${styleData.icon}"></i>`;
        document.getElementById('resultTitle').textContent = styleData.title;
        document.getElementById('resultDescription').textContent = styleData.description;
        
        // Build characteristics grid
        let characteristicsHTML = '';
        Object.entries(styleData.characteristics).forEach(([title, items]) => {
            characteristicsHTML += `
                <div class="characteristic-card">
                    <h6>${title}</h6>
                    <ul>
                        ${items.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                </div>
            `;
        });
        document.getElementById('characteristicsGrid').innerHTML = characteristicsHTML;
        
        // Hide assessment, show results
        document.getElementById('assessmentContainer').style.display = 'none';
        document.getElementById('resultsContainer').style.display = 'block';
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function saveLearningStyle(style, scores) {
        fetch('@Url.Action("SaveLearningStyle", "Profile")', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]')?.value
            },
            body: JSON.stringify({ style: style, scores: scores })
        })
        .then(response => response.json())
        .then(data => {
            console.log('Learning style saved successfully');
        })
        .catch(error => {
            console.error('Error saving learning style:', error);
        });
    }
    
    function restartAssessment() {
        answers = {};
        currentQuestionIndex = 1;
        document.querySelectorAll('input[type="radio"]').forEach(input => input.checked = false);
        document.querySelectorAll('.answer-option').forEach(option => option.classList.remove('selected'));
        document.getElementById('resultsContainer').style.display = 'none';
        document.getElementById('introSection').style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Handle answer selection visual feedback
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.answer-option').forEach(option => {
            option.addEventListener('click', function() {
                const radio = this.querySelector('input[type="radio"]');
                const questionName = radio.name;
                
                // Remove selected class from all options in this question
                document.querySelectorAll(`input[name="${questionName}"]`).forEach(input => {
                    input.closest('.answer-option').classList.remove('selected');
                });
                
                // Add selected class to clicked option
                this.classList.add('selected');
            });
        });
    });
</script>
}

