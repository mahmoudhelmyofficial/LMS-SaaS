@model List<LMS.Services.Interfaces.CourseRecommendation>
@{
    ViewData["Title"] = Html.T("ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©", "Next Course Recommendations");
}

<style>
    .course-recommendation-card {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        height: 100%;
    }
    
    .course-recommendation-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }
    
    .course-thumbnail {
        height: 200px;
        background-size: cover;
        background-position: center;
        position: relative;
    }
    
    .course-badge {
        position: absolute;
        top: 16px;
        right: 16px;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        backdrop-filter: blur(10px);
    }
    
    .match-score {
        position: absolute;
        bottom: 16px;
        right: 16px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 18px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .recommendation-reason {
        background: #f9fafb;
        padding: 12px 16px;
        border-radius: 10px;
        border-right: 3px solid #667eea;
        margin: 12px 0;
    }
    
    .skill-tag {
        display: inline-block;
        padding: 6px 14px;
        background: #e0e7ff;
        color: #667eea;
        border-radius: 20px;
        font-size: 12px;
        margin: 4px;
    }
    
    .learning-path-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 32px;
        border-radius: 16px;
        margin-bottom: 24px;
    }
    
    .path-step {
        background: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 16px;
        position: relative;
        color: #1f2937;
    }
    
    .path-step::before {
        content: '';
        position: absolute;
        top: -16px;
        right: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 10px solid white;
    }
    
    .path-step:first-child::before {
        display: none;
    }
</style>

<!-- Hero Section -->
<div class="learning-path-card">
    <div class="row align-items-center">
        <div class="col-lg-8">
            <h2 class="mb-3">ğŸ¯ @Html.T("Ù…Ø³Ø§Ø± ØªØ¹Ù„Ù…Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…", "Your Next Learning Path")</h2>
            <p class="mb-4 opacity-90">@Html.T("Ø¯ÙˆØ±Ø§Øª Ù…ÙØ®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙˆØ§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ", "Courses carefully selected based on your skills and interests")</p>
            <div class="d-flex gap-3 flex-wrap">
                <div class="d-flex align-items-center">
                    <i class="feather-check-circle me-2" style="font-size: 24px;"></i>
                    <span>@Html.T("ØªØ·Ø§Ø¨Ù‚", "Match") @Model.Average(c => c.MatchScore)% @Html.T("Ù…Ø¹ Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ", "with your interests")</span>
                </div>
                <div class="d-flex align-items-center">
                    <i class="feather-trending-up me-2" style="font-size: 24px;"></i>
                    <span>@Html.T("Ù…Ø¹Ø¯Ù„ Ù†Ø¬Ø§Ø­", "Success rate") @Model.Average(c => c.CompletionRate)%</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4 text-center">
            <div style="font-size: 120px; line-height: 1;">ğŸš€</div>
        </div>
    </div>
</div>

<!-- Filter Tabs -->
<div class="mb-4">
    <ul class="nav nav-pills" style="background: #f9fafb; padding: 8px; border-radius: 12px;">
        <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="pill" href="#recommended" style="border-radius: 8px;">
                <i class="feather-star me-2"></i>
                @Html.T("Ù…ÙˆØµÙ‰ Ø¨Ù‡", "Recommended")
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="pill" href="#popular" style="border-radius: 8px;">
                <i class="feather-trending-up me-2"></i>
                @Html.T("Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©", "Most Popular")
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="pill" href="#advanced" style="border-radius: 8px;">
                <i class="feather-arrow-up-circle me-2"></i>
                @Html.T("Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙ‚Ø¯Ù…", "Advanced Level")
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="pill" href="#career" style="border-radius: 8px;">
                <i class="feather-briefcase me-2"></i>
                @Html.T("ØªØ·ÙˆÙŠØ± Ù…Ù‡Ù†ÙŠ", "Career Development")
            </a>
        </li>
    </ul>
</div>

<!-- Tab Content -->
<div class="tab-content">
    <!-- Recommended Courses -->
    <div class="tab-pane fade show active" id="recommended">
        <div class="row g-4 mb-4">
            @foreach (var course in Model.Take(6))
            {
                <div class="col-lg-4 col-md-6">
                    <div class="course-recommendation-card">
                        <div class="course-thumbnail" style="background-image: url('@(course.ThumbnailUrl ?? "/assets/images/course-placeholder.jpg")');">
                            <div class="course-badge" style="background: rgba(102, 126, 234, 0.9); color: white;">
                                @course.RecommendationReason
                            </div>
                            <div class="match-score" style="color: @(course.MatchScore >= 80 ? "#22c55e" : course.MatchScore >= 60 ? "#3b82f6" : "#fbbf24");">
                                @course.MatchScore%
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <span class="badge bg-primary-subtle text-primary">@course.Level</span>
                                <div class="d-flex align-items-center">
                                    <i class="feather-star text-warning me-1" style="font-size: 14px;"></i>
                                    <strong>@course.Rating</strong>
                                    <span class="text-muted small me-1">(@course.ReviewsCount)</span>
                                </div>
                            </div>
                            
                            <h5 class="mb-2">@course.Title</h5>
                            <p class="text-muted small mb-3">@Html.T("Ø¨ÙˆØ§Ø³Ø·Ø©", "By") @course.InstructorName</p>
                            
                            <div class="recommendation-reason">
                                <small class="d-block">
                                    <i class="feather-info me-2"></i>
                                    <strong>@Html.T("Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ±Ø©ØŸ", "Why this course?")</strong>
                                </small>
                                <small class="text-muted">@course.Reason</small>
                            </div>
                            
                            <div class="mb-3">
                                @foreach (var skill in course.SkillsYoullLearn.Take(3))
                                {
                                    <span class="skill-tag">@skill</span>
                                }
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div class="d-flex align-items-center text-muted small">
                                    <i class="feather-clock me-1"></i>
                                    @course.Duration @Html.T("Ø³Ø§Ø¹Ø©", "hr(s)")
                                </div>
                                <div class="d-flex align-items-center text-muted small">
                                    <i class="feather-users me-1"></i>
                                    @course.EnrolledStudents @Html.T("Ø·Ø§Ù„Ø¨", "student(s)")
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <a href="@Url.Action("Details", "Courses", new { area = "", id = course.CourseId })" class="btn btn-primary">
                                    <i class="feather-eye me-2"></i>
                                    @Html.T("Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„", "View Details")
                                </a>
                                <button class="btn btn-outline-primary" onclick="addToWishlist(@course.CourseId)">
                                    <i class="feather-heart me-2"></i>
                                    @Html.T("Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©", "Add to Wishlist")
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    
    <!-- Popular Courses -->
    <div class="tab-pane fade" id="popular">
        <div class="row g-4">
            <div class="col-12 text-center py-5">
                <i class="feather-trending-up text-muted" style="font-size: 64px;"></i>
                <h4 class="mt-3 text-muted">@Html.T("Ù‚Ø±ÙŠØ¨Ø§Ù‹", "Coming Soon")</h4>
                <p class="text-muted">@Html.T("Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ", "Most popular courses right now")</p>
            </div>
        </div>
    </div>
    
    <!-- Advanced Courses -->
    <div class="tab-pane fade" id="advanced">
        <div class="row g-4">
            <div class="col-12 text-center py-5">
                <i class="feather-arrow-up-circle text-muted" style="font-size: 64px;"></i>
                <h4 class="mt-3 text-muted">@Html.T("Ù‚Ø±ÙŠØ¨Ø§Ù‹", "Coming Soon")</h4>
                <p class="text-muted">@Html.T("Ø¯ÙˆØ±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ", "Advanced courses to level up your skills")</p>
            </div>
        </div>
    </div>
    
    <!-- Career Development -->
    <div class="tab-pane fade" id="career">
        <div class="row g-4">
            <div class="col-12 text-center py-5">
                <i class="feather-briefcase text-muted" style="font-size: 64px;"></i>
                <h4 class="mt-3 text-muted">@Html.T("Ù‚Ø±ÙŠØ¨Ø§Ù‹", "Coming Soon")</h4>
                <p class="text-muted">@Html.T("Ø¯ÙˆØ±Ø§Øª ØªØ·ÙˆÙŠØ± Ù…Ù‡Ù†ÙŠ Ù…ÙØ³ØªÙ‡Ø¯ÙØ©", "Targeted career development courses")</p>
            </div>
        </div>
    </div>
</div>

<!-- Suggested Learning Path -->
<div class="row g-4 mt-4">
    <div class="col-12">
        <div class="course-recommendation-card">
            <div class="p-4">
                <h4 class="mb-4">
                    <i class="feather-map text-primary me-2"></i>
                    @Html.T("Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù‚ØªØ±Ø­", "Suggested Learning Path")
                </h4>
                <p class="text-muted mb-4">@Html.T("Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ù†Ø­Ùˆ Ø¥ØªÙ‚Ø§Ù† ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„ÙƒØ§Ù…Ù„", "Step by step towards mastering full-stack web development")</p>
                
                <div class="row g-3">
                    <div class="col-md-3">
                        <div class="path-step">
                            <div class="text-center mb-3">
                                <div class="avatar-text avatar-lg bg-success text-white mx-auto">
                                    <i class="feather-check"></i>
                                </div>
                            </div>
                            <h6 class="text-center mb-2">@Html.T("Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª", "Stage 1: Fundamentals")</h6>
                            <small class="text-muted d-block text-center">@Html.T("Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ÙˆÙŠØ¨: HTMLØŒ CSSØŒ JavaScript", "Web basics: HTML, CSS, JavaScript")</small>
                            <span class="badge bg-success w-100 mt-2">@Html.T("Ù…ÙƒØªÙ…Ù„", "Completed")</span>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="path-step">
                            <div class="text-center mb-3">
                                <div class="avatar-text avatar-lg bg-primary text-white mx-auto">
                                    <i class="feather-activity"></i>
                                </div>
                            </div>
                            <h6 class="text-center mb-2">@Html.T("Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Frontend", "Stage 2: Frontend")</h6>
                            <small class="text-muted d-block text-center">@Html.T("Ø£Ø·Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©: ReactØŒ VueØŒ Angular", "Frontend frameworks: React, Vue, Angular")</small>
                            <span class="badge bg-primary w-100 mt-2">@Html.T("Ù‚ÙŠØ¯ Ø§Ù„ØªÙ‚Ø¯Ù…", "In Progress")</span>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="path-step">
                            <div class="text-center mb-3">
                                <div class="avatar-text avatar-lg bg-secondary text-white mx-auto">
                                    <i class="feather-lock"></i>
                                </div>
                            </div>
                            <h6 class="text-center mb-2">@Html.T("Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Backend", "Stage 3: Backend")</h6>
                            <small class="text-muted d-block text-center">@Html.T("Ø§Ù„Ø®Ø§Ø¯Ù… ÙˆØ§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª: Node.jsØŒ PythonØŒ APIs", "Server & APIs: Node.js, Python, APIs")</small>
                            <span class="badge bg-secondary w-100 mt-2">@Html.T("Ù…Ù‚ÙÙ„", "Locked")</span>
                        </div>
                    </div>
                    
                    <div class="col-md-3">
                        <div class="path-step">
                            <div class="text-center mb-3">
                                <div class="avatar-text avatar-lg bg-secondary text-white mx-auto">
                                    <i class="feather-lock"></i>
                                </div>
                            </div>
                            <h6 class="text-center mb-2">@Html.T("Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Full Stack", "Stage 4: Full Stack")</h6>
                            <small class="text-muted d-block text-center">@Html.T("Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…ØªÙƒØ§Ù…Ù„Ø©", "Complete projects")</small>
                            <span class="badge bg-secondary w-100 mt-2">@Html.T("Ù…Ù‚ÙÙ„", "Locked")</span>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <button class="btn btn-primary btn-lg">
                        <i class="feather-play me-2"></i>
                        @Html.T("Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ", "Start Learning Path")
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    function addToWishlist(courseId) {
        fetch(`/Student/Courses/AddToWishlist`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ courseId: courseId })
        }).then(response => response.json())
          .then(data => {
              if (data.success) {
                  alert('@Html.Raw(Html.T("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©!", "Added to wishlist!").Replace("'", "\\'"))');
              }
          });
    }
</script>
}
