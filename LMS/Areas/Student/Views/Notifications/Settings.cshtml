@model LMS.Areas.Student.ViewModels.NotificationSettingsViewModel
@{
    ViewData["Title"] = Html.T("إعدادات الإشعارات", "Notification Settings");
}

@section Styles {
<style>
    .settings-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px 0;
        border-radius: 12px;
        margin-bottom: 30px;
    }
    .notification-setting-item {
        padding: 20px;
        border-radius: 8px;
        background: #f8f9fa;
        margin-bottom: 15px;
        transition: all 0.3s ease;
    }
    .notification-setting-item:hover {
        background: #e9ecef;
    }
    .form-switch .form-check-input {
        width: 3em;
        height: 1.5em;
        cursor: pointer;
    }
    .setting-icon {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        border-radius: 50%;
        font-size: 24px;
    }
</style>
}

<!-- Alert Messages -->
@await Html.PartialAsync("_AlertMessage")

<!-- Settings Header -->
<div class="settings-header mb-4">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="text-white fw-bold mb-2">
                    <i class="feather-bell me-2"></i>
                    @Html.T("إعدادات الإشعارات", "Notification Settings")
                </h2>
                <p class="text-white opacity-75 mb-0">@Html.T("تحكم في كيفية تلقي الإشعارات والتحديثات", "Control how you receive notifications and updates")</p>
            </div>
            <div class="col-lg-4 text-center d-none d-lg-block">
                <i class="feather-settings" style="font-size: 80px; color: rgba(255,255,255,0.2);"></i>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-8 mx-auto">
        <form asp-action="Settings" method="post">
            @Html.AntiForgeryToken()
            
            <!-- General Settings -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-mail me-2"></i>
                        @Html.T("الإعدادات العامة", "General settings")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-primary me-3">
                                    <i class="feather-mail"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("إشعارات البريد الإلكتروني", "Email notifications")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("تلقي الإشعارات عبر البريد الإلكتروني", "Receive notifications via email")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="EmailNotificationsEnabled" id="emailNotifications">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Learning Notifications -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-book me-2"></i>
                        @Html.T("إشعارات التعلم", "Learning notifications")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-info me-3">
                                    <i class="feather-book-open"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("تحديثات الدورات", "Course updates")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند إضافة محتوى جديد أو تحديث الدورات", "Notify when new content or course updates are added")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="CourseUpdatesEnabled" id="courseUpdates">
                            </div>
                        </div>
                    </div>

                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-warning me-3">
                                    <i class="feather-clipboard"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("واجبات جديدة", "New assignments")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند إضافة واجبات أو اختبارات جديدة", "Notify when new assignments or quizzes are added")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="NewAssignmentsEnabled" id="newAssignments">
                            </div>
                        </div>
                    </div>

                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-success me-3">
                                    <i class="feather-award"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("نتائج التقييم", "Assessment results")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند نشر درجات الواجبات والاختبارات", "Notify when assignment and quiz grades are published")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="GradeReleasedEnabled" id="gradeReleased">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Communication Notifications -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-message-circle me-2"></i>
                        @Html.T("إشعارات التواصل", "Communication notifications")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-primary me-3">
                                    <i class="feather-message-square"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("رسائل جديدة", "New messages")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند تلقي رسائل مباشرة من المدربين", "Notify when you receive direct messages from instructors")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="NewMessagesEnabled" id="newMessages">
                            </div>
                        </div>
                    </div>

                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-danger me-3">
                                    <i class="feather-volume-2"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("الإعلانات", "Announcements")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار بالإعلانات المهمة من المدربين", "Notify about important announcements from instructors")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="AnnouncementsEnabled" id="announcements">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Classes Notifications -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-video me-2"></i>
                        @Html.T("إشعارات الحصص المباشرة", "Live session notifications")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-danger me-3">
                                    <i class="feather-video"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("تذكير الحصص المباشرة", "Live session reminders")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("تذكير قبل بدء الحصص المباشرة", "Remind before live sessions start")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="LiveClassRemindersEnabled" id="liveClassReminders">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Achievements Notifications -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-award me-2"></i>
                        @Html.T("إشعارات الإنجازات", "Achievement notifications")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-warning me-3">
                                    <i class="feather-award"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("الشهادات والإنجازات", "Certificates & achievements")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند الحصول على شهادات وإنجازات جديدة", "Notify when you earn new certificates and achievements")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="CertificatesEnabled" id="certificates">
                            </div>
                        </div>
                    </div>

                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-success me-3">
                                    <i class="feather-star"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("الشارات والنقاط", "Badges & points")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار عند كسب نقاط وشارات جديدة", "Notify when you earn new points and badges")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="AchievementsEnabled" id="achievements">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Notifications -->
            <div class="card stretch stretch-full mb-4">
                <div class="card-header">
                    <h5 class="fw-bold mb-0">
                        <i class="feather-settings me-2"></i>
                        @Html.T("إشعارات النظام", "System notifications")
                    </h5>
                </div>
                <div class="card-body">
                    <div class="notification-setting-item">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                                <div class="setting-icon text-secondary me-3">
                                    <i class="feather-info"></i>
                                </div>
                                <div>
                                    <h6 class="fw-semibold mb-1">@Html.T("تحديثات النظام", "System updates")</h6>
                                    <p class="text-muted mb-0 fs-12">@Html.T("إشعار بالتحديثات والتحسينات الجديدة للمنصة", "Notify about new platform updates and improvements")</p>
                                </div>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" asp-for="SystemUpdatesEnabled" id="systemUpdates">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="card stretch stretch-full">
                <div class="card-body">
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="feather-save me-2"></i>
                            @Html.T("حفظ الإعدادات", "Save settings")
                        </button>
                        <a asp-action="Index" class="btn btn-outline-secondary">
                            <i class="feather-x me-2"></i>
                            @Html.T("إلغاء", "Cancel")
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
<script>
    (function(){ window.__T = window.__T || {}; window.__T.ConfirmDisableEmail = '@Html.Raw(Html.T("هل أنت متأكد من تعطيل إشعارات البريد الإلكتروني؟ قد تفوتك تحديثات مهمة.", "Are you sure you want to disable email notifications? You may miss important updates.").Replace("\\", "\\\\").Replace("'", "\\'"))'; })();
    // Add any custom JavaScript for settings page
    $(document).ready(function() {
        // Optional: Add confirmation before disabling all notifications
        $('form').on('submit', function(e) {
            var emailEnabled = $('#emailNotifications').is(':checked');
            if (!emailEnabled) {
                var confirmDisable = confirm((window.__T && window.__T.ConfirmDisableEmail) || 'Are you sure you want to disable email notifications? You may miss important updates.');
                if (!confirmDisable) {
                    e.preventDefault();
                    return false;
                }
            }
        });
    });
</script>
}

