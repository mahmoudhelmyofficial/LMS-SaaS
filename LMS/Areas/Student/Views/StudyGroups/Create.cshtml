@model LMS.Areas.Student.Controllers.CreateStudyGroupViewModel
@using LMS.Services.Interfaces
@inject IPlatformSettingsService PlatformSettings
@{
    ViewData["Title"] = Html.T("إنشاء مجموعة دراسة", "Create Study Group");
    var courses = ViewBag.Courses as List<LMS.Domain.Entities.Courses.Course> ?? new List<LMS.Domain.Entities.Courses.Course>();
    
    // Study group settings
    var minMembers = await PlatformSettings.GetIntSettingAsync("StudyGroup.MinMembers", 2);
    var maxMembers = await PlatformSettings.GetIntSettingAsync("StudyGroup.MaxMembers", 50);
}

<!-- Alert Messages -->
@await Html.PartialAsync("_AlertMessage")

<div class="card stretch stretch-full">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="feather-users text-primary me-2"></i>
            @Html.T("إنشاء مجموعة دراسة جديدة", "Create new study group")
        </h5>
    </div>
    <div class="card-body">
        <form asp-action="Create" method="post">
            <div class="row">
                <div class="col-lg-8">
                    <div class="mb-3">
                        <label class="form-label">@Html.T("اسم المجموعة", "Group name") <span class="text-danger">*</span></label>
                        <input type="text" asp-for="Name" class="form-control" placeholder="@Html.T("أدخل اسم المجموعة", "Enter group name")" required />
                    </div>

                    <div class="mb-3">
                        <label class="form-label">@Html.T("الوصف", "Description")</label>
                        <textarea asp-for="Description" class="form-control" rows="4" placeholder="@Html.T("وصف مختصر للمجموعة وأهدافها", "Brief description and goals of the group")"></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">@Html.T("الدورة", "Course") <span class="text-danger">*</span></label>
                        <select asp-for="CourseId" class="form-select" required>
                            <option value="">-- @Html.T("اختر الدورة", "Select course") --</option>
                            @foreach (var course in courses)
                            {
                                <option value="@course.Id">@course.Title</option>
                            }
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="form-label">@Html.T("الحد الأقصى للأعضاء (اختياري)", "Max members (optional)")</label>
                        <input type="number" asp-for="MaxMembers" class="form-control" min="@minMembers" max="@maxMembers" placeholder="@Html.T("اتركه فارغاً لعدد غير محدود", "Leave empty for unlimited")" />
                        <small class="text-muted">@Html.T("اتركه فارغاً للسماح بأي عدد من الأعضاء (الحد الأقصى:", "Leave empty to allow any number of members (max:") @maxMembers)</small>
                    </div>

                    <div class="d-flex gap-3">
                        <button type="submit" class="btn btn-primary">
                            <i class="feather-check me-2"></i>
                            @Html.T("إنشاء المجموعة", "Create group")
                        </button>
                        <a asp-action="Index" class="btn btn-outline-secondary">
                            <i class="feather-x me-2"></i>
                            @Html.T("إلغاء", "Cancel")
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

