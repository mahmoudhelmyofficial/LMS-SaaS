@{
    ViewData["Title"] = Html.T("ุงูุจุญุซ ูู ุงููุณุงุนุฏุฉ", "Help Search");
    Layout = "~/Areas/Student/Views/Shared/_Layout.cshtml";
    var searchQuery = ViewBag.SearchQuery as string ?? "";
}

<partial name="_HelpStyles" />

<style>
    .search-result-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        transition: all 0.2s ease;
        border-right: 4px solid transparent;
    }
    .search-result-card:hover {
        transform: translateX(-5px);
        border-right-color: #0891b2;
        box-shadow: 0 4px 15px rgba(8,145,178,0.1);
    }
    .search-result-card h5 { margin-bottom: 0.5rem; color: #1e293b; }
    .search-result-card h5 a { color: inherit; text-decoration: none; }
    .search-result-card h5 a:hover { color: #0891b2; }
    .search-result-card p { color: #64748b; margin-bottom: 0.5rem; font-size: 0.95rem; }
    .search-result-category { display: inline-flex; align-items: center; gap: 0.25rem; font-size: 0.8rem; color: #0891b2; background: #f0fdfa; padding: 0.25rem 0.75rem; border-radius: 20px; }
    .search-highlight { background: #fef08a; padding: 0 2px; border-radius: 2px; }
    .no-results { text-align: center; padding: 3rem; }
    .no-results i { font-size: 4rem; color: #cbd5e1; margin-bottom: 1rem; }
</style>

<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3">
                <partial name="_HelpSidebar" model="@("Search")" />
            </div>
            <div class="col-lg-9">
                <!-- Search Header -->
                <div class="help-content-hero">
                    <div class="help-content-icon cyan">
                        <i class="feather-search"></i>
                    </div>
                    <div>
                        <h1>@Html.T("ุงูุจุญุซ ูู ุงููุณุงุนุฏุฉ", "Help Search")</h1>
                        <p>@Html.T("ุงุจุญุซ ูู ุฌููุน ููุงุถูุน ุงููุณุงุนุฏุฉ ูุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ", "Search all help topics and FAQ")</p>
                    </div>
                </div>

                <!-- Search Box -->
                <div class="help-section">
                    <form asp-action="Search" method="get" class="help-search" style="max-width: 100%;">
                        <input type="text" name="query" class="form-control" placeholder="@Html.T("ุงูุชุจ ูููุงุช ุงูุจุญุซ...", "Type your search...")" value="@searchQuery">
                        <i class="feather-search"></i>
                    </form>
                </div>

                @if (!string.IsNullOrEmpty(searchQuery))
                {
                    <div class="help-section">
                        <h5 class="mb-4">
                            <i class="feather-file-text me-2 text-muted"></i>
                            @Html.T("ูุชุงุฆุฌ ุงูุจุญุซ ุนู:", "Search results for:") <span class="text-primary">"@searchQuery"</span>
                        </h5>

                        <!-- Sample Search Results - In production, these would be dynamically generated -->
                        <div id="searchResults">
                            <div class="search-result-card">
                                <h5><a asp-action="GettingStarted">ููู ุฃุจุฏุฃ ูู ุงุณุชุฎุฏุงู ุงูููุตุฉุ</a></h5>
                                <p>ุฏููู ุดุงูู ููุฎุทูุงุช ุงูุฃููู: ุฅุนุฏุงุฏ ุงูุญุณุงุจุ ุชุตูุญ ุงูุฏูุฑุงุชุ ุงูุชุณุฌูู ูู ุฃูู ุฏูุฑุฉ...</p>
                                <span class="search-result-category"><i class="feather-book"></i> ุฏููู ุงูุจุฏุก</span>
                            </div>

                            <div class="search-result-card">
                                <h5><a asp-action="Learning">ููู ุฃุดุงูุฏ ุงูุฏุฑูุณ ูุงูููุฏูููุงุชุ</a></h5>
                                <p>ุชุนุฑู ุนูู ูุดุบู ุงูููุฏููุ ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญุ ุงูุชุญูู ุจุงูุณุฑุนุฉ ูุงูุฌูุฏุฉ...</p>
                                <span class="search-result-category"><i class="feather-play"></i> ุชุฌุฑุจุฉ ุงูุชุนูู</span>
                            </div>

                            <div class="search-result-card">
                                <h5><a asp-action="Assessments">ููู ุฃุญู ุงูุงุฎุชุจุงุฑุงุชุ</a></h5>
                                <p>ุฃููุงุน ุงูุฃุณุฆูุฉุ ุงูููุช ุงููุญุฏุฏุ ุงููุญุงููุงุช ุงููุชุงุญุฉุ ููุฑุงุฌุนุฉ ุงููุชุงุฆุฌ...</p>
                                <span class="search-result-category"><i class="feather-check-square"></i> ุงูุงุฎุชุจุงุฑุงุช</span>
                            </div>

                            <div class="search-result-card">
                                <h5><a asp-action="Achievements">ููู ุฃุญุตู ุนูู ุงูุดูุงุฏุฉุ</a></h5>
                                <p>ูุชุทูุจุงุช ุงูุญุตูู ุนูู ุงูุดูุงุฏุฉุ ุชุญููููุงุ ููุดุงุฑูุชูุง ุนูู LinkedIn...</p>
                                <span class="search-result-category"><i class="feather-award"></i> ุงูุดูุงุฏุงุช</span>
                            </div>

                            <div class="search-result-card">
                                <h5><a asp-action="Purchases">ููู ุฃุดุชุฑู ุฏูุฑุฉ ูุฃุณุชุฎุฏู ููุจูู ุฎุตูุ</a></h5>
                                <p>ุฎุทูุงุช ุงูุดุฑุงุกุ ุทุฑู ุงูุฏูุนุ ุชุทุจูู ุงูููุจููุงุชุ ูุงูููุงุชูุฑ...</p>
                                <span class="search-result-category"><i class="feather-shopping-cart"></i> ุงูุดุฑุงุก</span>
                            </div>

                            <div class="search-result-card">
                                <h5><a asp-action="FAQ">ุงูููุฏูู ูุง ูุนููุ ูุงุฐุง ุฃูุนูุ</a></h5>
                                <p>ุฎุทูุงุช ุญู ูุดุงูู ุชุดุบูู ุงูููุฏูู: ุชุญุฏูุซ ุงููุชุตูุญุ ูุณุญ ุงููุงุดุ ุงูุชุญูู ูู ุงูุฅูุชุฑูุช...</p>
                                <span class="search-result-category"><i class="feather-help-circle"></i> ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</span>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <!-- Quick Links when no search -->
                    <div class="help-section">
                        <h5 class="mb-4">
                            <i class="feather-compass me-2 text-muted"></i>
                            @Html.T("ููุงุถูุน ุดุงุฆุนุฉ", "Popular topics")
                        </h5>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a asp-action="GettingStarted" class="search-result-card d-block text-decoration-none">
                                    <h5>๐ ููู ุฃุจุฏุฃุ</h5>
                                    <p>ุฏููู ุงูุจุฏุก ุงูุณุฑูุน ูููุณุชุฎุฏููู ุงูุฌุฏุฏ</p>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a asp-action="Learning" class="search-result-card d-block text-decoration-none">
                                    <h5>๐ฌ ูุดุงูุฏุฉ ุงูุฏุฑูุณ</h5>
                                    <p>ููู ุชุณุชุฎุฏู ูุดุบู ุงูููุฏูู</p>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a asp-action="Assessments" class="search-result-card d-block text-decoration-none">
                                    <h5>๐ ุงูุงุฎุชุจุงุฑุงุช</h5>
                                    <p>ููู ุชุญู ุงูุงุฎุชุจุงุฑุงุช ูุชูุฏู ุงููุงุฌุจุงุช</p>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a asp-action="Achievements" class="search-result-card d-block text-decoration-none">
                                    <h5>๐ ุงูุดูุงุฏุงุช</h5>
                                    <p>ุงุญุตู ุนูู ุดูุงุฏุงุชู ูุดุงุฑููุง</p>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a asp-action="Purchases" class="search-result-card d-block text-decoration-none">
                                    <h5>๐ณ ุงูุดุฑุงุก ูุงูุฏูุน</h5>
                                    <p>ุทุฑู ุงูุฏูุน ูุงูููุจููุงุช</p>
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a asp-action="FAQ" class="search-result-card d-block text-decoration-none">
                                    <h5>โ ุฃุณุฆูุฉ ุดุงุฆุนุฉ</h5>
                                    <p>ุฅุฌุงุจุงุช ุณุฑูุนุฉ ูุฃูุซุฑ ุงูุฃุณุฆูุฉ</p>
                                </a>
                            </div>
                        </div>
                    </div>
                }

                <!-- Navigation -->
                <div class="help-navigation">
                    <a asp-action="Index" class="btn btn-outline-secondary">
                        <i class="feather-arrow-right me-2"></i>
                        ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
                    </a>
                    <a asp-area="Student" asp-controller="Support" asp-action="Index" class="btn btn-primary">
                        <i class="feather-headphones me-2"></i>
                        ุชูุงุตู ูุน ุงูุฏุนู
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    // Simple client-side search filtering
    const searchInput = document.querySelector('input[name="query"]');
    const resultsContainer = document.getElementById('searchResults');
    
    if (searchInput && resultsContainer) {
        const allResults = resultsContainer.querySelectorAll('.search-result-card');
        
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            
            allResults.forEach(card => {
                const text = card.textContent.toLowerCase();
                card.style.display = text.includes(query) ? 'block' : 'none';
            });
        });
    }
</script>
}

