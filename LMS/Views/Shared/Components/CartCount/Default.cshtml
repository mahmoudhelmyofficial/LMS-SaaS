@model LMS.ViewComponents.CartCountViewModel
@inject LMS.Services.Interfaces.IPlatformSettingsService PlatformSettings

@{
    var maxDisplay = await PlatformSettings.GetIntSettingAsync("UI.BadgeMaxDisplay", 99);
}

<a href="@Url.Action("Cart", "Checkout", new { area = "Student" })" 
   class="nav-link position-relative d-flex align-items-center cart-icon-link"
   title="سلة التسوق">
    <i class="feather-shopping-cart fs-4"></i>
    @if (Model.HasItems)
    {
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-badge">
            @(Model.ItemCount > maxDisplay ? $"{maxDisplay}+" : Model.ItemCount.ToString())
            <span class="visually-hidden">عناصر في السلة</span>
        </span>
    }
</a>

<style>
    .cart-icon-link {
        padding: 0.5rem;
        color: var(--bs-body-color);
        transition: all 0.2s ease;
    }
    
    .cart-icon-link:hover {
        color: var(--bs-primary);
        transform: scale(1.1);
    }
    
    .cart-badge {
        font-size: 0.65rem;
        padding: 0.25em 0.5em;
        min-width: 1.2rem;
        animation: pulse 2s infinite;
    }
    
    @@keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4);
        }
        70% {
            box-shadow: 0 0 0 6px rgba(220, 53, 69, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
        }
    }
</style>

